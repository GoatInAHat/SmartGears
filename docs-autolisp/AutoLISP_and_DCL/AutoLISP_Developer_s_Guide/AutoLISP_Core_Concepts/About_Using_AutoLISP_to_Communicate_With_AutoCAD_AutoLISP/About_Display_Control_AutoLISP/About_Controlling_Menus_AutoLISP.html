<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="concept" name="topic-type"/>
  <meta content="/view/OARX/2025/ENU/" name="helpsystempath"/>
  <meta content="OARX" name="product"/>
  <meta content="2025" name="release"/>
  <meta content="Developer" name="book"/>
  <meta content="AutoCAD-AutoLISP" name="component"/>
  <meta content="21/10/2024" name="created"/>
  <meta content="ACD=2025" name="applies-to"/>
  <meta content="ACAD_E=2025" name="applies-to"/>
  <meta content="AMECH_PP=2025" name="applies-to"/>
  <meta content="ARCHDESK=2025" name="applies-to"/>
  <meta content="BLDSYS=2025" name="applies-to"/>
  <meta content="CIV3D=2025" name="applies-to"/>
  <meta content="MAP=2025" name="applies-to"/>
  <meta content="PLNT3D=2025" name="applies-to"/>
  <meta content="PNID=2025" name="applies-to"/>
  <meta content="STRDET=2025" name="applies-to"/>
  <meta content="UTLDESN=2025" name="applies-to"/>
  <meta content="TRIDION" name="generatedby"/>
  <meta content="disable" name="user-comments"/>
  <meta content="The menucmd function controls the display of the menus on the menu bar, drawing area, or an image title menu." name="description"/>
  <meta content="general" name="experiencelevel"/>
  <meta content="programmer" name="audience"/>
  <meta content="29/03/2023" name="modified"/>
  <meta content="autolisp" name="topic-subtype"/>
  <meta content="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B" name="topicid"/>
  <meta content="ENU" name="language"/>
  <title>
   About Controlling Menus (AutoLISP)
  </title>
  <link href="../../../../../_assets/client-28da4093.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B">
  <div class="head">
   <div class="head-block">
    <div class="button-info">
     <span id="infoline">
     </span>
    </div>
    <div class="ancestry">
    </div>
    <div class="head-text">
     <h1>
      About Controlling Menus (AutoLISP)
     </h1>
    </div>
   </div>
  </div>
  <div class="body conbody">
   <p class="shortdesc">
    The
    <samp class="ph codeph" id="GUID-567D3A37-855E-446C-8BF4-BD8F12079505">
     menucmd
    </samp>
    function controls the display of the menus on the menu bar, drawing area, or an image title menu.
   </p>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__WSFACF1429558A55DE11F0759FF1E4B858C-64FF">
    It displays, modifies, or queries one of the submenus of the current menu, and accepts a string argument that specifies the submenu and the action to perform on that submenu. The
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-4664445C-99BF-461A-9661-ED218ED3B2E4">
     menucmd
    </samp>
    function takes a string argument that consists of two fields, separated by an equal sign, in the following form:
   </p>
   <pre class="pre codeblock prettyprint">(menucmd <em class="ph i" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-F9218FEF-8509-463A-BEAF-59690EDB47F3">"menu_area=action"</em>)</pre>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-2C0045EE-DB9F-400A-A1D5-BB6BC7A0BA5A">
    The
    <em class="ph i" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-E65C4A2B-C38D-420A-8235-671738A4959E">
     menu_area
    </em>
    field specifies which part of the menu is to receive the action. This field can specify a menu area, such as
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-9263FD3C-0B61-432A-A201-3512368D134B">
     P0
    </samp>
    (for the shortcut menu) or a specific menu item. The
    <em class="ph i" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-039ED626-DD64-4D76-843A-B3C42412F30A">
     action
    </em>
    field specifies the action to perform on the menu area or menu item, or a submenu to load into the menu area. The menu areas that can receive an action are the same as those used in customization file submenu references.
   </p>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__WSFACF1429558A55DE11F0759FF1E4B858C-64FC">
    Every menu area has a currently loaded submenu. By default, the first submenu following a menu section label is loaded into that menu area.
   </p>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-AE18C04D-C1F9-44E4-BA8B-A5D06D96102A">
    If
    <em class="ph i" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-F65EFDF7-5FD6-4D21-8E40-5132C7E71BA0">
     menu_area
    </em>
    specifies a pull-down menu or image tile menu,
    <em class="ph i" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-7D27BB40-535D-4985-B8B3-A5D9B02E85F8">
     action
    </em>
    can be an asterisk (
    <strong class="ph b" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-28BF3CF9-07CB-40EF-BA75-EE75C92EA7D1">
     <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-AB6D394A-C2EE-4B15-9E23-877B05C68F48">
      *
     </samp>
    </strong>
    ). This causes the menu to be displayed; pull-down menus and image tile menus are not automatically displayed when they are called.
   </p>
   <div class="note note" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-07691428-C9EB-4B21-8A67-29B9BD5A63B4">
    <span class="notetitle">
     Note:
    </span>
    In Windows, only the
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-A824AFB3-7938-4C45-93B4-7F5FBA9EF695">
     P0
    </samp>
    (cursor) menu and image tile menus are displayed with the asterisk. Image tile menus are not supported on Mac OS.
   </div>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-C2BC072A-03BE-4530-AAD5-B48A9C6792CD">
    The following code loads the menu with the
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-1E44A2B3-C3EA-4FBD-9C05-713374572589">
     POP0
    </samp>
    alias into the
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-42C771D2-3028-411B-8061-E7693AAD4A95">
     P0
    </samp>
    (cursor) menu area and displays it.
   </p>
   <pre class="pre codeblock prettyprint">(menucmd "P0=POP0") ; Loads the POP0 menu into the P0 menu area
(menucmd "P0=*")    ; Display it</pre>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-55CC066F-2EF7-4944-9896-8F50B30D12C3">
    If the correct menu is loaded into a particular menu area, you do not need to load it specifically each time you want to display it.
   </p>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-81F77649-F605-4148-B359-5A37F5983115">
    The following code displays the pull-down menu currently loaded in the
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-7F3D7D71-3F44-401B-9A22-04AD97E8C25A">
     P1
    </samp>
    (first pull-down menu) location.
   </p>
   <pre class="pre codeblock prettyprint">(menucmd "P1=*")</pre>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-BC20D2E4-DAE3-47B6-9B04-0BC5217BAF2C">
    Using
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-79DAB4C8-E310-44AD-AD7D-F7ABF8240D39">
     "P1=*"
    </samp>
    without previously loading the menu can result in unexpected behavior. Although you can load virtually any menu at a pull-down or shortcut menu location, it is best to use only menus specifically designed for that menu area. For example, if you have a submenu called
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-CFE793D3-F816-4845-96C6-008C860C5091">
     MORESTUFF
    </samp>
    , you can load it at the
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-84974CF6-1AF0-4D56-8F85-4CDCDBDE7D05">
     P1
    </samp>
    location with the following code:
   </p>
   <pre class="pre codeblock prettyprint">(menucmd "P1=MORESTUFF") ; Loads the MORESTUFF menu in the P1 menu location
(menucmd "P1=*")         ; Displays it</pre>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-312F415F-9A83-498B-AA1C-409F85662556">
    This menu remains in this location until you replace it by loading another menu, as in the following:
   </p>
   <pre class="pre codeblock prettyprint">(menucmd "P1=POP1")</pre>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-729764AD-5BEE-4EFB-8CC1-4B24CFF5F80D">
    If your menu uses the disabling (graying-out) and marking features, you can retrieve and change the state of a menu item label with the
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-9155148D-8129-4021-B01F-E72B8D29F67D">
     menucmd
    </samp>
    function. The following call retrieves the current state of the fourth label in the pull-down menu
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-D630AA46-7FA1-476A-9B48-07EA32C52EA2">
     P2
    </samp>
    .
   </p>
   <pre class="pre codeblock prettyprint">(menucmd "P2.4=#?") ; If disabled returns "P2.4=~"</pre>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-4DF05D73-751C-4145-A702-FCDB077543AB">
    These function calls enable and disable that same menu item label:
   </p>
   <pre class="pre codeblock prettyprint">(menucmd "P2.4=")  ; Enables the label
(menucmd "P2.4=~") ; Disables the label</pre>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-C0B2F08D-AE2A-42C3-9B83-7E069298D10F">
    You can also place and remove marks to the left of menu item labels.
   </p>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-F6189C4F-9952-4281-938A-6CE09F0E084D">
    The previously described method of menu item handling works relatively well with a single static menu. However, it becomes unreliable when menu item locations change when you load multiple partial menu files. You can make use of the menu-group and name-tag features to keep track of menu items. Instead of specifying a menu item by its location on a menu, you specify the menu group and name tag associated with the menu item.
   </p>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-600B2115-6D41-4B5E-9648-3CBBFF82744C">
    When you use the menu group to enable, disable, and mark menu item labels, you must precede the group name with a
    <em class="ph i" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-6C521E3C-6DA5-4EFC-A675-FB8729BE0E28">
     G
    </em>
    , as shown in the following examples.
   </p>
   <pre class="pre codeblock prettyprint">(menucmd "Gacad.ID_New=~") ; Disables the label
(menucmd "Gacad.ID_New=")  ; Enables the label</pre>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-E4DF8419-53D6-4FAA-87CF-C72FBB0194D9">
    Not only can an AutoLISP function enable and disable menu item labels, it can also modify the text displayed in the label by placing a DIESEL string expression in the label. Because DIESEL accepts only strings as input, you can pass information to the DIESEL expression through a USERS1-5 system variable that has been set to a value returned by your function.
   </p>
   <p class="p" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-2AA72BFA-C689-4DFB-B0A0-C5FC26975400">
    You can also use the
    <samp class="ph codeph" id="GUID-92DA21E0-1E33-45AD-B2F8-1AB788392E4B__GUID-B3A33BD3-CBE1-42CE-80DE-B93999F90FAD">
     menucmd
    </samp>
    function to evaluate DIESEL string expressions within an AutoLISP function. The following routine returns the current time:
   </p>
   <pre class="pre codeblock prettyprint">(defun C:CTIME ( / ctim)
  (setq ctim
  (menucmd "M=$(edtime,$(getvar,date),H:MMam/pm)"))
  (princ (strcat "\nThe current time is " ctim ))
 (princ)
)</pre>
  </div>
  <div class="related-links">
   <div class="familylinks">
    <div class="parentlink">
     <strong>
      Parent topic:
     </strong>
     <a class="link" href="About_Display_Control_AutoLISP.html">
      About Display Control (AutoLISP)
     </a>
    </div>
   </div>
   <div class="relinfo relconcepts">
    <h4 class="related">
     Related Concepts
    </h4>
    <ul>
     <li>
      <a class="link" href="../About_Device_Access_and_Control_AutoLISP/About_Calibrating_Tablets_AutoLISP.html" title="Digitizing tablets can be calibrated using the TABLET command or with the AutoLISP tablet function.">
       About Calibrating Tablets (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../About_Accessing_Commands_and_Services_AutoLISP/About_Configuration_Files_AutoLISP.html" title="AutoCAD uses a configuration file with the name acadxxxx.cfg to store device and application information.">
       About Configuration Files (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=OARX&amp;l=ENU&amp;accessmode=live&amp;guid=GUID-9C2C56A3-0BEF-45AB-A7FE-5825339DCB41">
       Display Control Functions Reference (AutoLISP)
      </a>
     </li>
    </ul>
   </div>
   <div class="relinfo relref">
    <h4 class="related">
     Related Reference
    </h4>
    <ul>
     <li>
      <a class="link" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=OARX&amp;l=ENU&amp;accessmode=live&amp;guid=GUID-F94A885A-4DA2-432B-AC1A-EB49CC6C1C72">
       DIESEL Functions Reference
      </a>
     </li>
    </ul>
   </div>
  </div>
 </body>
</html>
