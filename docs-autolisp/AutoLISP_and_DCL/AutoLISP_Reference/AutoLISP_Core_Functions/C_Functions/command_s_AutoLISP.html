<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="reference-adsk" name="topic-type"/>
  <meta content="/view/OARX/2025/ENU/" name="helpsystempath"/>
  <meta content="OARX" name="product"/>
  <meta content="2025" name="release"/>
  <meta content="Developer" name="book"/>
  <meta content="AutoCAD-AutoLISP-Reference" name="component"/>
  <meta content="21/10/2024" name="created"/>
  <meta content="ACD=2025" name="applies-to"/>
  <meta content="ACAD_E=2025" name="applies-to"/>
  <meta content="AMECH_PP=2025" name="applies-to"/>
  <meta content="ARCHDESK=2025" name="applies-to"/>
  <meta content="BLDSYS=2025" name="applies-to"/>
  <meta content="CIV3D=2025" name="applies-to"/>
  <meta content="MAP=2025" name="applies-to"/>
  <meta content="PLNT3D=2025" name="applies-to"/>
  <meta content="PNID=2025" name="applies-to"/>
  <meta content="STRDET=2025" name="applies-to"/>
  <meta content="UTLDESN=2025" name="applies-to"/>
  <meta content="TRIDION" name="generatedby"/>
  <meta content="disable" name="user-comments"/>
  <meta content="Executes an AutoCAD command and the supplied input" name="description"/>
  <meta content="COMMAND-S" name="contextid"/>
  <meta content="general" name="experiencelevel"/>
  <meta content="programmer" name="audience"/>
  <meta content="29/03/2023" name="modified"/>
  <meta content="autolisp" name="topic-subtype"/>
  <meta content="function" name="topic-subtype"/>
  <meta content="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1" name="topicid"/>
  <meta content="ENU" name="language"/>
  <title>
   command-s (AutoLISP)
  </title>
  <link href="../../../../_assets/client-28da4093.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1">
  <div class="head">
   <div class="head-block">
    <div class="button-info">
     <span id="infoline">
     </span>
    </div>
    <div class="ancestry">
    </div>
    <div class="head-text">
     <h1>
      command-s (AutoLISP)
     </h1>
    </div>
   </div>
  </div>
  <div class="body referencebody-adsk">
   <p class="shortdesc">
    Executes an AutoCAD command and the supplied input
   </p>
   <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-E049A211-8422-4856-8878-401FA04484E5">
    <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-0A75B4A3-BD6D-4633-AB76-DE70E52BC48F">
     Supported Platforms:
    </strong>
    Windows, Mac OS, and Web
   </p>
   <div class="section" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__SECTION_91C60B8494F548519C3456E26561E76E">
    <h2 class="title sectiontitle">
     Signature
    </h2>
    <pre class="pre codeblock prettyprint">(command-s <em class="ph i" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-BE1C5FCE-2A59-488F-95B5-470F42E5B367">[cmdname [arguments ...]]</em>)</pre>
    <div class="section" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-B5EFC62C-FD11-4B64-BD28-8DF2051E803F">
     <dl class="dl" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-B5EFC62C-FD11-4B64-BD28-8DF2051E803F">
      <dt class="dt dlterm">
       <em class="ph i" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-5912F0FA-DF74-450D-8DE2-4A730EECEA6E">
        cmdname
       </em>
      </dt>
      <dd class="dd" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-5361AF0B-1FB2-4721-BF82-0D922C2950C6">
       <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-A44A4DA9-30CE-4E3F-A3FB-4E8A21CCEA38">
        <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-06C0A6BE-2759-4FE7-A837-B2830374655E">
         Type:
        </strong>
        String
       </p>
       <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-D41AF7E5-9A1C-4E37-8A3E-E21C78169497">
        Name of the command to execute.
       </p>
      </dd>
      <dt class="dt dlterm">
       <em class="ph i" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-6D2FCC4F-ED6A-406A-B405-ABB49CECAFB5">
        arguments
       </em>
      </dt>
      <dd class="dd" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-45E5EB22-119C-4D29-A263-D8700FDA0DE0">
       <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-E1ED5737-02F6-4DA1-A42B-1C895A36DEF7">
        <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-23E9F701-A87C-49D7-A3C3-5167F7A16659">
         Type:
        </strong>
        Integer, Real, String, or List
       </p>
       <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-D824B699-F8FE-4DEA-BB28-D76F33A553A0">
        The command input to supply to the command being executed.
       </p>
       <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-239F6E95-4473-42EE-9528-96CAC42B4337">
        The arguments to the command function can be strings, reals, integers, or points, as expected by the prompt sequence of the executed command. A null string ("") is equivalent to pressing Enter on the keyboard.
       </p>
      </dd>
     </dl>
    </div>
   </div>
   <div class="section" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__SECTION_8121DB625BD2426692D413F2DAEF8B53">
    <h2 class="title sectiontitle">
     Return Values
    </h2>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-B3CCAA51-38BF-4554-9983-2AEC23689596">
     <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-88BE126E-0F90-4A26-AC9C-2A64722F7CEB">
      Type:
     </strong>
     nil
    </p>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-EC64B86E-BA1A-4819-86F1-6D6F7EAD4A01">
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-D2E35983-D2D2-49C2-875F-F8795EEEEE92">
      nil
     </samp>
     is returned by the function when the command is done executing on the provided arguments. An
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-E28BC1BB-DEF2-4A87-ADAA-3353D385EB3E">
      *error*
     </samp>
     is returned when the function fails to complete successfully.
    </p>
   </div>
   <div class="section" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__SECTION_298F5F06AC5647E79C797C8CFA393B6C">
    <h2 class="title sectiontitle">
     Remarks
    </h2>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-8FCE1175-EC52-4C4C-85D1-3195808F9CE5">
     See the sections later in this topic for more information.
    </p>
   </div>
   <div class="section" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__SECTION_06021A628D694D5694FE7E4455B27AFA">
    <h2 class="title sectiontitle">
     Examples
    </h2>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-36712A66-B065-46D4-9C7B-22FB700C6039">
     The following example demonstrates how to execute the AutoCAD CIRCLE command and create a circle with a diameter of 2.75.
    </p>
    <pre class="pre codeblock prettyprint">Command: <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-D17E6BC6-DA49-41CD-9143-EF638801518F">(command-s "._circle" "5,4" "_d" 2.75)</strong>
nil</pre>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-72F16EBD-6818-4366-AB1D-4A0211AB520D">
     The following example demonstrates how to prompt the user for the center point of the circle.
    </p>
    <pre class="pre codeblock prettyprint">Command: <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-4D2CBFDC-AF82-4808-94CE-0530016BBD95">(setq cPt (getpoint "\nSpecify center point: "))</strong>
(5.0 4.0 0.0)

Command: <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-F264A117-9C2B-4394-9CD8-854F1912BE5C">(command-s "._circle" cPt "_d" 2.75)</strong>
nil</pre>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-EAB590E6-28F3-4245-A044-C869B20AD2D5">
     The following is an invalid use of prompting for user input with the command-s function.
    </p>
    <pre class="pre codeblock prettyprint">Command: <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-6988523D-660F-4B41-B286-8197ECC7CF96">(command-s "._circle" (getpoint "\nSpecify center point: ") "_d" 2.75)</strong></pre>
   </div>
   <div class="section" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__SECTION_5EF3D3DBB0C64C9B96C60468F6FE898A">
    <h2 class="title sectiontitle">
     Differences from the
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-7F855FE3-3D89-4BD6-8FFC-42B5A9E3F01F">
      Command
     </samp>
     Function
    </h2>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-25C90BFD-EC8B-41F6-9643-94854F31D3A5">
     The
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-A2DA0004-FDA8-435C-8327-DFBDA1B8EAA4">
      command-s
     </samp>
     function is a variation of the
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-3FE988C1-01CD-4A7C-B254-60A8670870D6">
      command
     </samp>
     function which has some restrictions on command token content, but is both faster than command and can be used in
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-012DB500-0E0F-4187-8A07-216F528F8AD3">
      *error*
     </samp>
     handlers due to internal logic differences.
    </p>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-BD5B6820-342A-4866-BA27-A9E6F04C5CF2">
     A command token is a single argument provided to the
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-5DA423FD-B0D7-4BB8-801E-98917838EBA5">
      command-s
     </samp>
     function. This could be a string, real, integer, point, entity name, list, and so on. The following example shows the AutoCAD LINE command and three command tokens:
    </p>
    <pre class="pre codeblock prettyprint">(command-s "._line" "0,0" "5,7" "")</pre>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-9557F7E9-5535-45CF-94FA-73B2BA92B199">
     The "-s" suffix stands for "subroutine" execution of the supplied command tokens. In this form, AutoCAD is directly called from AutoLISP, processes the supplied command tokens in a temporary command processor distinct from the main document command processor, and then returns, thus terminating the temporary command processor. The command that is being executed must be started and completed in the same
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-C96F9B31-9DAA-49EF-B1DA-DC8102DA6168">
      command-s
     </samp>
     function.
    </p>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-C61C4484-74FE-4FD6-AA39-C936D75F1EC5">
     In contrast, the
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-9EFC6EAB-8008-4F53-A25B-428B68144324">
      command
     </samp>
     function remains a "co-routine" execution of the supplied command tokens, where AutoLISP evaluates the tokens one at a time, sending the result to AutoCAD, and then returning to allow AutoCAD to process that token. AutoCAD then calls AutoLISP back, and AutoLISP resumes evaluation of the expression in progress. In this logic flow, subsequent token expressions can query AutoCAD for the results of previous token processing and use it.
    </p>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-1405AFC7-87D9-4BE7-AAF1-C3BB769A7402">
     In summary, the "co-routine" style of command token processing is more functionally powerful, but is limited in when it can be used when running. The "subroutine" style of command token processing can be used in a much wider range of contexts, but processes all command tokens in advance, and actual execution is non-interactive. For the same set of command tokens,
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-739F0361-946F-408D-BB70-A26BBBA7BAAD">
      command-s
     </samp>
     function is significantly faster.
    </p>
   </div>
   <div class="section" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__SECTION_4B9AAB7BBC4940DA902A751B3243067C">
    <h2 class="title sectiontitle">
     Known Considerations
    </h2>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-1CADA3C2-34FC-470C-A0CB-62CE58D7D5B2">
     When using the
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-34AE6581-36DC-47E5-805D-FCAD26F526A5">
      command-s
     </samp>
     function, you must take the following into consideration:
    </p>
    <ul class="ul" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__UL_8C3D8C731AA24313BCD8113FB4BB5147">
     <li class="li" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__LI_1A2A79E31A414BF0814BFCADA734D407">
      Token streams fed in a single command-s expression must represent a full command and its input. Any commands in progress when command tokens are all processed will be cancelled. The following is not valid with the
      <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-83F4FA78-9EFE-4485-BF3A-23A32413477F">
       command-s
      </samp>
      function:
      <pre class="pre codeblock prettyprint">(command-s "._line")
(command-s "2,2" "12.25,9" "")</pre>
     </li>
     <li class="li" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__LI_D0DF7144AECF4CEBAA0FFCC2FF49B4FF">
      All command tokens will be evaluated before they are handed over to AutoCAD for execution. In contrast, the
      <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-F610F52E-5DD7-4BAA-ABF5-050E74E9DCF5">
       command
      </samp>
      function actually performs each command token evaluation and then feeds the result to AutoCAD, which processes it before the next command token is processed.
     </li>
     <li class="li" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__LI_355027F63F894AABB9924E40251F0C2D">
      No "Pause" command tokens may be used. Expressions that interact with the drawing area or Command Window may be used, but will all be processed before AutoCAD receives and processes any of them.
      <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-1ED6771A-5547-467C-81A0-E6FA02D28DD8">
       The following is not valid with the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-BDC663AA-875F-48F7-8CA8-0D2B09021317">
        command-s
       </samp>
       function:
      </p>
      <pre class="pre codeblock prettyprint">(command-s "._line" "0,0" PAUSE "")</pre>
     </li>
    </ul>
    <div class="note caution" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-B067F7CD-2182-463B-A1D5-1C78B3129520">
     <span class="cautiontitle">
      Caution:
     </span>
     Although the
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-4C93D763-0963-4CC5-8C90-092B4B59C053">
      command-s
     </samp>
     function is similar to the
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-D6EE7843-5C7B-47B5-81D7-D93B822ED9D6">
      command
     </samp>
     function, caution should be taken when using U or UNDO to roll back the system state if there is an AutoCAD command already in progress when the AutoLISP expression is entered. In that case, the results of running UNDO may cause the command in progress to fail or even crash AutoCAD.
    </div>
   </div>
   <div class="section" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__SECTION_BF7C6552BB21477B83CD5664EE2F315F">
    <h2 class="title sectiontitle">
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-92BCB303-3F94-42CC-A5E3-51A002932A8D">
      *error*
     </samp>
     Handler
    </h2>
    <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-B12D9B15-3822-4BF8-94FD-FCFF982D2BE8">
     If your *error* handler uses the
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-464BB28A-8FCA-42F5-B380-CC480E164FCC">
      command
     </samp>
     function, consider updating the way you define your custom
     <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-A280513B-B705-46D4-976E-D2DA0BEA35C4">
      *error*
     </samp>
     handlers using the following methods:
    </p>
    <ul class="ul" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__UL_9B92507DB3954DDF8940F976603F5E0F">
     <li class="li" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__LI_3E47B98FBAF64016BB2CE9803516262F">
      <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-0508021E-BA71-4344-8906-1408CFD4E2A9">
       Substitute
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-636B1CDC-F1F2-4259-B1E6-3F9CBC70A7AC">
        command-s
       </samp>
       for
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-08145E32-AE8D-4EAF-86AD-DFDCE3014ED6">
        command
       </samp>
       in
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-FAE785F2-0378-4236-B80B-715716D48E4D">
        *error*
       </samp>
       handler
      </strong>
      <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-05B3D999-4FB4-48A7-ACCD-D36255F39D2B">
       For typical
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-E956D85F-4CD1-4C08-B95B-B1B236D78762">
        *error*
       </samp>
       handler cases where the previous state of the program needs to be restored and a few batch commands are executed, you can substitute
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-BAD6A0C1-DCC1-45FC-B5F9-FA86564B035E">
        (command-s &lt;...&gt;)
       </samp>
       for
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-6A33AEB7-5D80-460D-88AC-36560FAACC7E">
        (command &lt;...&gt;)
       </samp>
       . The
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-06432A9F-D006-4696-A1EC-BF35B954EB70">
        *error*
       </samp>
       handler is called from the same context as it always has been.
      </p>
      <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-AE2DFEC6-EF7C-4835-B9E7-951EFC8F0E2D">
       The following demonstrates a based
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-659E49DE-8D3F-4DC8-BABA-3FBD96098B59">
        *error*
       </samp>
       handler using the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-199614E9-F133-4C11-9C81-26054C08855C">
        command-s
       </samp>
       function:
      </p>
      <pre class="pre codeblock prettyprint">(defun my_err(s)
  (prompt "\nERROR: mycmd failed or was cancelled")
  (setvar "clayer" old_clayer)
  (command-s "._undo" "_e")
  (setq *error* mv_oer)
)

(defun c:mycmd ()
  (setq old_err *error*
        *error* my_err
        old_clayer (getvar "clayer")
  )

  (setq insPt (getpoint "\nSpecify text insertion: "))

  (if (/= insPt nil)
    (progn
      (command-s "._undo" "_be")
      (command-s "._-layer" "_m" "Text" "_C" "3" "" "")
      (command-s "._-text" insPt "" "0" "Sample Text")
      (command-s "._undo" "_e")
    )
  )

  (setvar "clayer" old_clayer)
  (setq *error* mv_oer)
 (princ)
)</pre>
     </li>
     <li class="li" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__LI_8C1CED22A3EF43948128BF0D526D64D0">
      <strong class="ph b" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-4BD941EF-C863-483E-9899-641BEE1E0282">
       Retaining the use of the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-5EAB57FE-7B04-4C09-8715-006D6746435D">
        command
       </samp>
       function in
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-BA27DFB2-783B-40A2-9E6F-32DD7FC020FF">
        *error*
       </samp>
       handler
      </strong>
      <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-00F5C02B-0ABD-40B8-A9FD-1F1EBF2AFC57">
       If using the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-34C143CC-D77B-4C18-8672-588160AD2B54">
        command-s
       </samp>
       function is not viable option, then the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-1801030F-C4BF-47A0-94F6-E89E3C65D5AD">
        command
       </samp>
       function can still be used, but only at the expense of losing access to any local symbols that would normally be on the AutoLISP call stack at the time of the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-E10B92B4-F6C5-4155-8F52-B2C17E61579A">
        *error*
       </samp>
       processing.
      </p>
      <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-841C4CA3-14FC-4FDB-9D78-E086D1FCCD0D">
       The following is an overview of what is required to continue to use the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-42B5E24D-8FC5-442F-9F39-546E3DC33399">
        command
       </samp>
       function in the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-A6D4B046-90E0-45E2-ADA6-3466EA66C74D">
        *error*
       </samp>
       handler.
      </p>
      <ul class="ul" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__UL_0052530DE0F24D67932D1AAAC536954B">
       <li class="li" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__LI_3F955964993F462185D2043A04BBA4B9">
        When overriding the
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-85CC3358-A9BF-4117-B5B0-8E6B6DF4660C">
         *error*
        </samp>
        symbol with a custom
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-E090CF03-1DA1-47FA-B601-229A9B38A5F8">
         *error*
        </samp>
        handler, invoke the
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-0A6F1620-D170-4A60-80DF-1746A4A630FE">
         *push-error-using-command*
        </samp>
        function to inform AutoLISP that error handling will be used with the proceeding
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-8ADDC62B-C566-4ABC-9B7A-35EB7D83A106">
         command
        </samp>
        functions.
        <div class="note note" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-0BBB1E2A-5037-4744-852B-A9410DC6FF38">
         <span class="notetitle">
          Note:
         </span>
         Whenever an AutoLISP expression evaluation begins, the AutoLISP engine assumes that the
         <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-1847689F-05ED-46C3-BA67-132DAF712044">
          command
         </samp>
         function will not be allowed within an
         <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-FE309129-1E28-4F28-A74A-2D23759186AA">
          *error*
         </samp>
         handler.
        </div>
       </li>
       <li class="li" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__LI_DFFC756FFFED447292682318C1B31AA1">
        If the
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-DBDC8CD7-3878-479B-8567-5CF6756A58A1">
         *error*
        </samp>
        handler refers to local symbols that are on the AutoLISP stack at the point where AutoLISP program failed or was cancelled, you must remove those references, or make the referenced symbols global symbols.
        <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-07E9113C-C9DB-4DB8-B8EF-2EE4977B631A">
         All local symbols on the AutoLISP call stack are pushed out of scope because the AutoLISP evaluator is reset before entering the
         <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-62B8750E-E9A9-4118-AC2D-939A9DDBDB11">
          *error*
         </samp>
         handler.
        </p>
       </li>
      </ul>
      <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-6BDA6F6D-A9F4-40F5-8A5D-13432C21E624">
       Now the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-88E7FDB6-53D4-4E93-8CE0-167735CD5C56">
        command
       </samp>
       function can be used within the
       <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-AB1DCA53-6ADA-47E9-836B-A37F95E3E05A">
        *error*
       </samp>
       handler.
      </p>
      <p class="p" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-3C36734B-79A0-417B-8736-9271E4BE6123">
       However, if your program actually pushes and pops error handlers as part of its operations, or your AutoLISP logic can be invoked while other unknown AutoLISP logic is invoked, there are a couple more steps you may have to make.
      </p>
      <ul class="ul" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__UL_64E110EB8EAB4636A850B6C0F7B1D544">
       <li class="li" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__LI_800F63AB23A24F4EAF1BA762D2111934">
        When restoring an old error handler, also invoke the
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-F8DF830D-E120-4984-ADB2-E069004CD539">
         *pop-error-mode*
        </samp>
        function to reverse the effects of any call to the
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-0F7DD6BC-42B3-479E-981B-3C4FD960AEA6">
         *push-error-using-command*
        </samp>
        or
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-08794A7C-30FE-46D5-B18B-36EC59A0C886">
         *push-error-using-stack*
        </samp>
        functions.
       </li>
       <li class="li" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__LI_64F9CE3DDDA249B59C22BF27A75D08BD">
        If your logic has nested pushes and pops of the
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-B7C7F53A-8356-4393-94F9-3EF1444854A1">
         *error*
        </samp>
        handler, and an
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-D0831DE1-A3C4-4517-8463-3C2037CC2FCF">
         *error*
        </samp>
        handler has been set up to use the command function by invoking
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-644EEB74-84D4-4316-B21C-FE0258D91528">
         *push-error-using-command*
        </samp>
        , while the nested handler will not use it, you can provide access to the locally defined symbols on the AutoLISP stack by invoking
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-3DC4C4FA-8821-4DFA-A382-80E710C849AB">
         *push-error-using-stack*
        </samp>
        at the same point where you set
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-C6965F19-897A-4741-915D-2B6E12FFBAFB">
         *error*
        </samp>
        to the current handler. If this is done, you must also invoke
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-5FCCC092-72E1-410E-ABAB-D84AC67919F4">
         *pop-error-mode*
        </samp>
        after the old
        <samp class="ph codeph" id="GUID-5C9DC003-3DD2-4770-95E7-7E19A4EE19A1__GUID-C0015FC3-0679-44BB-B58A-28144050DAC2">
         *error*
        </samp>
        handler is restored.
       </li>
      </ul>
     </li>
    </ul>
   </div>
  </div>
  <div class="related-links">
   <div class="relinfo relconcepts">
    <h4 class="related">
     Related Concepts
    </h4>
    <ul>
     <li>
      <a class="link" href="../Functions_By_Functionality/Query_and_Command_Functions_Reference_AutoLISP.html">
       Query and Command Functions Reference (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=OARX&amp;l=ENU&amp;accessmode=live&amp;guid=GUID-EF2D73CE-9B75-4532-AF2F-DD6F0C36C3FD">
       About Passing Pick Points to AutoCAD Commands (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=OARX&amp;l=ENU&amp;accessmode=live&amp;guid=GUID-EF910176-86D2-4158-A7C3-E926A002F421">
       About Defining Commands (AutoLISP)
      </a>
     </li>
    </ul>
   </div>
   <div class="relinfo relref">
    <h4 class="related">
     Related Reference
    </h4>
    <ul>
     <li>
      <a class="link" href="command_AutoLISP.html" title="Executes an AutoCAD command">
       command (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../I_Functions/initcommandversion_AutoLISP.html" title="Forces the next command to run with the specified version">
       initcommandversion (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../I_Functions/initdia_AutoLISP.html" title="Forces the display of the next command's dialog box">
       initdia (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../V_Functions/vl_cmdf_AutoLISP.html" title="Executes an AutoCAD command">
       vl-cmdf (AutoLISP)
      </a>
     </li>
    </ul>
   </div>
  </div>
 </body>
</html>
