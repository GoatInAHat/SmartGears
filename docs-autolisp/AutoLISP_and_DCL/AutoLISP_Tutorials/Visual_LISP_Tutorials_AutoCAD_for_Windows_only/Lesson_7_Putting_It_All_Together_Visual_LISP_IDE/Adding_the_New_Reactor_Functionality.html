<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="concept" name="topic-type"/>
  <meta content="/view/OARX/2025/ENU/" name="helpsystempath"/>
  <meta content="OARX" name="product"/>
  <meta content="2025" name="release"/>
  <meta content="Developer" name="book"/>
  <meta content="AutoCAD-AutoLISP-Tutorials" name="component"/>
  <meta content="25/4/2024" name="created"/>
  <meta content="ACD=2025" name="applies-to"/>
  <meta content="ACAD_E=2025" name="applies-to"/>
  <meta content="AMECH_PP=2025" name="applies-to"/>
  <meta content="ARCHDESK=2025" name="applies-to"/>
  <meta content="BLDSYS=2025" name="applies-to"/>
  <meta content="CIV3D=2025" name="applies-to"/>
  <meta content="MAP=2025" name="applies-to"/>
  <meta content="PLNT3D=2025" name="applies-to"/>
  <meta content="PNID=2025" name="applies-to"/>
  <meta content="STRDET=2025" name="applies-to"/>
  <meta content="UTLDESN=2025" name="applies-to"/>
  <meta content="CSY, DEU, ESP, FRA, HUN, ITA, KOR, PLK, PTB, RUS, CHS, CHT" name="applies-to-languages"/>
  <meta content="TRIDION" name="generatedby"/>
  <meta content="disable" name="user-comments"/>
  <meta content="GUID-209318DE-95C4-40F6-8776-935C8905FDEE" name="workflow-parent-id"/>
  <meta content="general" name="experiencelevel"/>
  <meta content="programmer" name="audience"/>
  <meta content="02/12/2019" name="modified"/>
  <meta content="autolisp" name="topic-subtype"/>
  <meta content="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9" name="topicid"/>
  <meta content="ENU" name="language"/>
  <title>
   Adding the New Reactor Functionality
  </title>
  <link href="../../../../_assets/client-28da4093.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9">
  <div class="head">
   <div class="head-block">
    <div class="button-info">
     <span id="infoline">
     </span>
    </div>
    <div class="ancestry">
    </div>
    <div class="head-text">
     <h1>
      Adding the New Reactor Functionality
     </h1>
    </div>
   </div>
  </div>
  <div class="body conbody">
   <div class="section" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-EAD4B151-1FF0-4A60-8E24-3DDB331D7DAD">
    <p class="p" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__WSFACF1429558A55DE1929BBDFEF458CE1C-788B">
     In Lesson 6, you hooked up callback function
     <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-FA7D70AB-A96D-42EF-9C37-179BD0BF4974">
      gp:command-will-start
     </samp>
     to the reactor event
     <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-A4E760BE-C532-4855-8052-8BC1C11CB76C">
      :vlr-commandWillStart
     </samp>
     . As it currently exists, the function displays some messages and initializes two global variables,
     <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-CACBD044-5323-46A7-8449-C84BFA183BEA">
      *polyToChange*
     </samp>
     and
     <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-87538490-8A04-4CC4-8513-8112A6284685">
      *reactorsToRemove*
     </samp>
     , to
     <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-FD61B141-6BD7-44A4-9EE2-EBDF6EE251CE">
      nil
     </samp>
     .
    </p>
   </div>
   <div class="section" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__WSFACF1429558A55DE6C92BAFEE30F7510-7DBB">
    <h2 class="title sectiontitle">
     To add functionality to the gp:command-will-start callback function
    </h2>
    <ol class="ol" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__WS1A9193826455F5FF18CB41610EC0A2E719-72EC">
     <li class="li" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__WS1A9193826455F5FF-7F10494411F03A24F24-1D21">
      Open your
      <em class="ph i" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-B8826D9F-93A2-45B2-BA5D-0F1E221C2236">
       gpreact.lsp
      </em>
      file.
     </li>
     <li class="li" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__WS1A9193826455F5FF-7F10494411F03A24F24-1D20">
      In the
      <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-DE938825-ED2F-4A64-9B99-D242D6CB522A">
       gp:command-will-start
      </samp>
      function, add two variables to the
      <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-4BC8625F-A16D-450F-B29D-04D1385F66EB">
       setq
      </samp>
      function call by modifying it as follows:
      <pre class="pre codeblock prettyprint">;; Reset all four reactor globals to nil.
(setq   *lostAssociativity* nil
        *polyToChange* nil
        *reactorsToChange* nil
        *reactorsToRemove* nil)</pre>
     </li>
     <li class="li" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__WS1A9193826455F5FF-7F10494411F03A24F24-1D1F">
      Replace the remaining code in
      <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-37566B4E-2A4C-4C53-9FA0-E6CC82D1D2DB">
       gp:command-will-start
      </samp>
      , up to the last
      <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-791FCB8C-385D-4853-8C53-C79E8A375CE3">
       princ
      </samp>
      function call, with the following code:
      <pre class="pre codeblock prettyprint">(if (member (setq currentCommandName (car command-list))
            '("U"          "UNDO"      "STRETCH"
            "MOVE"       "ROTATE"    "SCALE"
            "BREAK"      "GRIP_MOVE" "GRIP_ROTATE"
            "GRIP_SCALE" "GRIP_MIRROR")
    ) ;_ end of member
  (progn
    (setq *lostAssociativity* T)
    (princ "\nNOTE: The ")
    (princ currentCommandName)
    (princ " command will break a path's associativity .")
  ) ;_ end of progn
) ;_ end of if</pre>
      <p class="p" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__WSFACF1429558A55DE1929BBDFEF458CE1C-788A">
       This code checks to see if the user issued a command that breaks the associativity between the tiles and the path. If the user issued such a command, the program sets the
       <samp class="ph codeph" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__GUID-ED208720-7F7A-46E9-B52D-29C7E28C8602">
        *lostAssociativity*
       </samp>
       global variable and warns the user.
      </p>
      <p class="p" id="GUID-9C3CE8AA-3D59-4608-B370-9CB357A393E9__WSFACF1429558A55DE1929BBDFEF458CE1C-7889">
       As you experiment with the garden path application, you may discover additional editing commands that can modify the garden path and cause the loss of associativity. Add these commands to the quoted list so that the user is aware of what will happen. When this function fires, the user has started a command but has not selected any entities to modify. The user could still cancel the command, leaving things unchanged.
      </p>
     </li>
    </ol>
   </div>
  </div>
  <div class="related-links">
   <div class="familylinks">
    <div class="parentlink">
     <strong>
      Parent topic:
     </strong>
     <a class="link" href="Lesson_7_Putting_It_All_Together_Visual_LISP_IDE.html">
      Lesson 7: Putting It All Together (Visual LISP IDE)
     </a>
    </div>
    <div class="previouslink">
     <strong>
      Previous topic:
     </strong>
     <a class="link" href="Storing_Information_Within_the_Reactor_Objects.html">
      Storing Information Within the Reactor Objects
     </a>
    </div>
    <div class="nextlink">
     <strong>
      Next topic:
     </strong>
     <a class="link" href="Adding_Activity_to_the_Object_Reactor_Callback_Functions_AutoLISP.html">
      Adding Activity to the Object Reactor Callback Functions (AutoLISP)
     </a>
    </div>
   </div>
  </div>
 </body>
</html>
