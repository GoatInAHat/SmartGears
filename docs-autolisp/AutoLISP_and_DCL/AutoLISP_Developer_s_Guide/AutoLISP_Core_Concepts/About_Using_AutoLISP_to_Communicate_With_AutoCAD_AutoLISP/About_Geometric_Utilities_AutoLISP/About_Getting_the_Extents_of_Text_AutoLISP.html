<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="concept" name="topic-type"/>
  <meta content="/view/OARX/2025/ENU/" name="helpsystempath"/>
  <meta content="OARX" name="product"/>
  <meta content="2025" name="release"/>
  <meta content="Developer" name="book"/>
  <meta content="AutoCAD-AutoLISP" name="component"/>
  <meta content="21/10/2024" name="created"/>
  <meta content="ACD=2025" name="applies-to"/>
  <meta content="ACAD_E=2025" name="applies-to"/>
  <meta content="AMECH_PP=2025" name="applies-to"/>
  <meta content="ARCHDESK=2025" name="applies-to"/>
  <meta content="BLDSYS=2025" name="applies-to"/>
  <meta content="CIV3D=2025" name="applies-to"/>
  <meta content="MAP=2025" name="applies-to"/>
  <meta content="PLNT3D=2025" name="applies-to"/>
  <meta content="PNID=2025" name="applies-to"/>
  <meta content="STRDET=2025" name="applies-to"/>
  <meta content="UTLDESN=2025" name="applies-to"/>
  <meta content="TRIDION" name="generatedby"/>
  <meta content="disable" name="user-comments"/>
  <meta content="The textbox function returns the diagonal coordinates of a box that encloses text." name="description"/>
  <meta content="general" name="experiencelevel"/>
  <meta content="programmer" name="audience"/>
  <meta content="03/12/2019" name="modified"/>
  <meta content="autolisp" name="topic-subtype"/>
  <meta content="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117" name="topicid"/>
  <meta content="ENU" name="language"/>
  <title>
   About Getting the Extents of Text (AutoLISP)
  </title>
  <link href="../../../../../_assets/client-28da4093.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117">
  <div class="head">
   <div class="head-block">
    <div class="button-info">
     <span id="infoline">
     </span>
    </div>
    <div class="ancestry">
    </div>
    <div class="head-text">
     <h1>
      About Getting the Extents of Text (AutoLISP)
     </h1>
    </div>
   </div>
  </div>
  <div class="body conbody">
   <p class="shortdesc">
    The
    <samp class="ph codeph" id="GUID-3EF9CC75-C046-434A-BC19-87A3A08F86FF">
     textbox
    </samp>
    function returns the diagonal coordinates of a box that encloses text.
   </p>
   <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-AFAC88CC-D7E0-4982-8517-C84DCA8CB7A8">
    The
    <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-29D45258-3C51-4447-BDA3-C2100784B74D">
     textbox
    </samp>
    function takes an entity definition list of the type returned by
    <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-E7EDB42B-7593-46D7-BE09-89186AEB4428">
     entget
    </samp>
    (an association list of group codes and values) as its single argument. This list can contain a complete association list description of the text object or just a list describing the text string.
   </p>
   <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-649B">
    The points returned by
    <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-F6BBC31E-1992-4438-B4E0-B3E70A3C4919">
     textbox
    </samp>
    describe the bounding box (an imaginary box that encloses the text) of the text object, as if its insertion point were located at (0,0,0) and its rotation angle were 0. The first list returned is the point (0.0 0.0 0.0), unless the text object is oblique or vertical or it contains letters with descenders (such as g and p). The value of the first point list specifies the offset distance from the text insertion point to the lower-left corner of the smallest rectangle enclosing the text. The second point list specifies the upper-right corner of that box. The returned point lists always describe the bottom-left and upper-right corners of this bounding box, regardless of the orientation of the text being measured.
   </p>
   <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-649A">
    The following example code shows the minimum allowable entity definition list that
    <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-E79AF8D4-B068-48F2-98E5-34B958E5D702">
     textbox
    </samp>
    accepts. Because no additional information is provided,
    <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-104F80A6-D9C7-4754-A7FD-7763F80A8405">
     textbox
    </samp>
    uses the current defaults for text style and height.
   </p>
   <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-14F1CFB4-F2BA-453D-B3F3-7D988985BFF1">
    Command:
    <strong class="ph b" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-E4B01988-525F-43D6-9528-1EE76B5092E5">
     (textbox '((1 . "Hello world")))
    </strong>
   </p>
   <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-0EB92E50-FF0A-4862-905C-3048D658FF25">
    ((0.0 0.0 0.0) (2.80952 1.0 0.0))
   </p>
   <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-6498">
    The actual values returned by
    <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-E3B2A30A-CF3B-41B3-BDBF-BEA32FF41BA8">
     textbox
    </samp>
    will vary depending on the current text style.
   </p>
   <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-6497">
    The following example code demonstrates one method of providing the
    <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-5DF2D005-2CB0-4B30-B105-8BCE418F33BF">
     textbox
    </samp>
    function with an entity definition list.
   </p>
   <div class="section" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-2D03AC23-16F8-493D-BF28-52DC7636ABC3">
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-39063D61-CB96-4AEF-BD46-09CDD590ECA2">
     Command:
     <strong class="ph b" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-CC5DF969-0D10-449E-BB0D-5BB83A7C92D7">
      text
     </strong>
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-CA7CF2A0-0409-4386-B92E-311724E242A2">
     Specify start point of text or [Justify/Style]:
     <strong class="ph b" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-F5B39B07-69CF-4F94-8C43-4EA5B0149840">
      1,1
     </strong>
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-D2B78949-A2E7-4246-A300-91BA80DF3FCC">
     Specify height &lt;0.2000&gt;:
     <em class="ph i" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-19675FC6-ED99-4598-9148-5C51ED5CEC68">
      Press Enter
     </em>
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-9701B74D-AD5C-46FC-ACD7-19207DC34873">
     Specify rotation angle of text &lt;0&gt;:
     <em class="ph i" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-DDCAAB51-B111-41EF-80A4-509D29151C08">
      Press Enter
     </em>
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-FD8DE772-CB2C-40E0-B3AD-581F45EC577C">
     In the in-place text editor, enter
     <strong class="ph b" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-1EA35BC9-35BF-4A03-8F20-8158054238E4">
      test
     </strong>
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-0D74F871-D1AD-487C-BC7E-D7A627E8693D">
     In the in-place text editor,
     <em class="ph i" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-BD9C04F1-FAE5-4D42-8D6E-E6C1C4D88234">
      Press Enter
     </em>
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-9D9EDEF7-21D7-4E2C-B3B8-D6549CD170E8">
     Command:
     <strong class="ph b" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-6EBB2C26-5879-41A9-8488-3D27471170D5">
      (setq e (entget (entlast)))
     </strong>
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-AC941AC2-C99A-416A-8635-44B5BB332207">
     ((-1 . &lt;Entity name: 7ffffb05da0&gt;) (0 . "TEXT") (330 . &lt;Entity name:
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-5289BB5B-86E7-4E0A-84EA-A4A0FABAA693">
     7ffffb039f0&gt;) (5 . "1D2") (100 . "AcDbEntity") (67 . 0) (410 .
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-AA68FB03-7D85-4C41-AAEA-12EEA2DFE628">
     "Model") (8 . "0") (100 . "AcDbText") (10 1.0 1.0 0.0) (40 . 0.2) (1 .
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-A63FB90E-0306-45DE-A7EF-5E76EFCEB8E5">
     "test") (50 . 0.0) (41 . 1.0) (51 . 0.0) (7 . "Standard") (71 . 0) (72
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-EB800FCC-5988-4275-AF5B-CD971594B1D7">
     . 0) (11 0.0 0.0 0.0) (210 0.0 0.0 1.0) (100 . "AcDbText") (73 . 0))
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-DAD4A97B-D6E3-4BCD-8D8A-C53B1710FE28">
     Command:
     <strong class="ph b" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-CD1FD7A7-E289-41DF-95AB-F871A0E0FB5F">
      (textbox e)
     </strong>
    </p>
    <p class="p promptblock" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-94518A60-4391-4653-AB6A-0F5233C28E45">
     ((0.00491132 -0.00327422 0.0) (0.448295 0.195498 0.0))
    </p>
    <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-6496">
     The following figure shows the results of applying
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-65B197EB-2952-4136-82B0-B29669765CE6">
      textbox
     </samp>
     to a text object with a height of 1.0. The figure also shows the baseline and insertion point of the text.
    </p>
    <div class="fig fignone" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WS73099CC142F4875516D84BE10EBC87A53F-79DF">
     <img class="image" height="128" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__IMAGE_966E9C44510F4E4A9BA4D082BEBE04BF" src="../../../../../_assets/GUID_7CEDF7A2_A6E9_4870_A0C6_470D62069171-f0c4ef39.png" width="504"/>
    </div>
    <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-6495">
     If the text is vertical or rotated,
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-170F5AD6-FF7A-4357-96EC-C95A2ADA062E">
      pt1
     </samp>
     is still the bottom-left corner and
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-1974CEB1-CE4C-44EE-BC15-07C79E892C08">
      pt2
     </samp>
     is the upper-right corner; the bottom-left point may have negative offsets if necessary.
    </p>
    <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-6494">
     The following figure shows the point values (
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-A340F5D6-4A58-4B77-AEEE-94E79CBD4C01">
      pt1
     </samp>
     and
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-1188C6B1-17CA-4B01-837B-C9B0F2AD8FBC">
      pt2
     </samp>
     ) that
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-2BBB7BF0-1875-475C-8A06-45027AA3B1A2">
      textbox
     </samp>
     returns for samples of vertical and aligned text. In both samples, the height of the letters is 1.0. (For the aligned text, the height is adjusted to fit the alignment points.)
    </p>
    <div class="fig fignone" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WS73099CC142F4875516D84BE10EBC87A53F-79DE">
     <img class="image" height="108" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__IMAGE_A47AD82562FE4A2982C802A998AFEEB2" src="../../../../../_assets/GUID_B788B19E_2B4B_4865_AA16_CFD77B096A09-16852759.png" width="504"/>
    </div>
    <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-6493">
     When using vertical text styles, the points are still returned in left-to-right, bottom-to-top order as they are for horizontal styles, so that the first point list will contain negative offsets from the text insertion point.
    </p>
    <div class="fig fignone" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WS73099CC142F4875516D84BE10EBC87A53F-79DD">
     <img class="image" height="227" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__IMAGE_95DE12A0660B44308C6E4AAB996B1125" src="../../../../../_assets/GUID_EFCED42B_8AE9_4C0E_8299_843CC37E6720-804b2c4f.png" width="504"/>
    </div>
    <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-6492">
     Regardless of the text orientation or style, the points returned by
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-E404F052-4360-4BCD-A3EE-3A29220E4E2F">
      textbox
     </samp>
     are such that the text insertion point (group code 10) directly translates to the origin point of the object coordinate system (OCS) for the associated text object. This point can be referenced when translating the coordinates returned from
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-31FE79BA-FBF3-4811-9FB6-C7E35B85F586">
      textbox
     </samp>
     into points that define the actual extent of the text. The following two sample functions use
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-FD8A5E86-D9BB-4DDA-A3C5-52FC698141EF">
      textbox
     </samp>
     to place a box around selected text regardless of its orientation.
    </p>
    <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-6491">
     The first routine uses the
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-5622A90B-C523-49F7-AF36-89376FD77C2A">
      textbox
     </samp>
     function to draw a box around a selected text object:
    </p>
    <pre class="pre codeblock prettyprint">(defun C:TBOX ( / textent tb ll ur ul lr)
  (setq textent (car (entsel "\nSelect text: ")))
  (command "._ucs" "Object" textent)
  (setq tb (textbox (list (cons -1 textent)))
        ll (car tb)
        ur (cadr tb)
        ul (list (car ll) (cadr ur))
        lr (list (car ur) (cadr ll))
  )
  (command "._pline" ll lr ur ul "Close")
  (command "._ucs" "p")
 (princ)
)</pre>
    <p class="p" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__WSFACF1429558A55DE11F0759FF1E4B858C-6490">
     The second routine, which follows, accomplishes the same task as the first routine by performing the geometric calculations with the AutoLISP functions
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-AD42F6EF-070A-4CA4-BC00-04924810836C">
      sin
     </samp>
     and
     <samp class="ph codeph" id="GUID-DA97206B-85C2-4746-B0E6-67E8ABE99117__GUID-CD44EA21-01AF-43BA-B255-950794B41C68">
      cos
     </samp>
     . The result is correct only if the current UCS is parallel to the plane of the text object.
    </p>
    <pre class="pre codeblock prettyprint">(defun C:TBOX2 ( / textent ang sinrot cosrot t1 t2 p0 p1 p2 p3 p4)
  (setq textent (entget (car (entsel "\nSelect text: "))))
  (setq p0 (cdr (assoc 10 textent))
        ang (cdr (assoc 50 textent))
        sinrot (sin ang)
        cosrot (cos ang)
        t1 (car (textbox textent))
        t2 (cadr (textbox textent))
        p1 (list
               (+ (car p0)
                 (- (* (car t1) cosrot)(* (cadr t1) sinrot))
               )
               (+ (cadr p0)
                 (+ (* (car t1) sinrot)(* (cadr t1) cosrot))
               )
             )
        p2 (list
               (+ (car p0)
                 (- (* (car t2) cosrot)(* (cadr t1) sinrot))
               )
               (+ (cadr p0)
                 (+ (* (car t2) sinrot)(* (cadr t1) cosrot))
               )
             )
        p3 (list
               (+ (car p0)
                 (- (* (car t2) cosrot)(* (cadr t2) sinrot))
               )
               (+ (cadr p0)
                 (+ (* (car t2) sinrot)(* (cadr t2) cosrot))
               )
             )
        p4 (list
               (+ (car p0)
                 (- (* (car t1) cosrot)(* (cadr t2) sinrot))
               )
               (+ (cadr p0)
                 (+ (* (car t1) sinrot)(* (cadr t2) cosrot))
               )
             )
  )
  (command "._pline" p1 p2 p3 p4 "c")
 (princ)
)</pre>
   </div>
  </div>
  <div class="related-links">
   <div class="familylinks">
    <div class="parentlink">
     <strong>
      Parent topic:
     </strong>
     <a class="link" href="About_Geometric_Utilities_AutoLISP.html" title="A group of functions allows applications to obtain pure geometric information and geometric data from the drawing.">
      About Geometric Utilities (AutoLISP)
     </a>
    </div>
   </div>
   <div class="relinfo relconcepts">
    <h4 class="related">
     Related Concepts
    </h4>
    <ul>
     <li>
      <a class="link" href="About_Geometric_Utilities_AutoLISP.html" title="A group of functions allows applications to obtain pure geometric information and geometric data from the drawing.">
       About Geometric Utilities (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../../About_AutoLISP_Basics_AutoLISP/About_List_Handling_AutoLISP/About_Point_Lists_AutoLISP.html" title="AutoLISP utilizes the list data type to represent graphical coordinate values.">
       About Point Lists (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../../About_Using_AutoLISP_to_Manipulate_AutoCAD_Objects_AutoLISP/About_Object_Handling_AutoLISP/About_Accessing_an_Object_s_Entity_Name_AutoLISP/About_Accessing_an_Object_s_Entity_Name_AutoLISP.html" title="An AutoLISP routine must obtain an object’s entity name to make subsequent calls to the entity data or selection set functions.">
       About Accessing an Object’s Entity Name (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=OARX&amp;l=ENU&amp;accessmode=live&amp;guid=GUID-8C29D7A3-9CBB-47A8-A936-87118782303B">
       Geometric Functions Reference (AutoLISP)
      </a>
     </li>
    </ul>
   </div>
  </div>
 </body>
</html>
