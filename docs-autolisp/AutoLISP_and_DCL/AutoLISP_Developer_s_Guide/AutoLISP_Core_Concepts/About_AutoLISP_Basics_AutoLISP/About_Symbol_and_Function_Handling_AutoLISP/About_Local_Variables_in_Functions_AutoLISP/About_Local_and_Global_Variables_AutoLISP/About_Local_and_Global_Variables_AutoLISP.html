<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="concept" name="topic-type"/>
  <meta content="/view/OARX/2025/ENU/" name="helpsystempath"/>
  <meta content="OARX" name="product"/>
  <meta content="2025" name="release"/>
  <meta content="Developer" name="book"/>
  <meta content="AutoCAD-AutoLISP" name="component"/>
  <meta content="21/10/2024" name="created"/>
  <meta content="ACD=2025" name="applies-to"/>
  <meta content="ACAD_E=2025" name="applies-to"/>
  <meta content="AMECH_PP=2025" name="applies-to"/>
  <meta content="ARCHDESK=2025" name="applies-to"/>
  <meta content="BLDSYS=2025" name="applies-to"/>
  <meta content="CIV3D=2025" name="applies-to"/>
  <meta content="MAP=2025" name="applies-to"/>
  <meta content="PLNT3D=2025" name="applies-to"/>
  <meta content="PNID=2025" name="applies-to"/>
  <meta content="STRDET=2025" name="applies-to"/>
  <meta content="UTLDESN=2025" name="applies-to"/>
  <meta content="TRIDION" name="generatedby"/>
  <meta content="disable" name="user-comments"/>
  <meta content="Variables can be local or global in scope based on how they are defined." name="description"/>
  <meta content="general" name="experiencelevel"/>
  <meta content="programmer" name="audience"/>
  <meta content="02/12/2019" name="modified"/>
  <meta content="autolisp" name="topic-subtype"/>
  <meta content="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D" name="topicid"/>
  <meta content="ENU" name="language"/>
  <title>
   About Local and Global Variables (AutoLISP)
  </title>
  <link href="../../../../../../../_assets/client-28da4093.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D">
  <div class="head">
   <div class="head-block">
    <div class="button-info">
     <span id="infoline">
     </span>
    </div>
    <div class="ancestry">
    </div>
    <div class="head-text">
     <h1>
      About Local and Global Variables (AutoLISP)
     </h1>
    </div>
   </div>
  </div>
  <div class="body conbody">
   <p class="shortdesc">
    Variables can be local or global in scope based on how they are defined.
   </p>
   <p class="p" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__WSFACF1429558A55DE11F0759FF1E4B858C-6554">
    The use of local variables ensures that the variables in your functions are unaffected by other user-defined functions and custom applications. These variables do not remain available after the calling function has completed its task.
   </p>
   <p class="p" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__WSFACF1429558A55DE11F0759FF1E4B858C-6553">
    When you define a function or a command, any variables that you want to remain local must be added after the forward slash (
    <strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-40642384-178A-4AA1-8B9D-57FA7AA31017">
     <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-5F1E8390-F3C9-45DC-9528-07D52FF068BC">
      /
     </samp>
    </strong>
    ) in the arguments and local variables list. For example, the following example defines a function named
    <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-DACB7399-D69D-45F1-9544-45A1F223651A">
     ARGTEST
    </samp>
    which combines a constant string with other strings values.
    <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-0B830093-CCBD-4FAA-8140-186BF7D2ED4B">
     arg1
    </samp>
    and
    <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-1216F2E3-4B8A-4809-8194-8CA31844D0CC">
     arg2
    </samp>
    are populated by the arguments you provide when using the function, but
    <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-E4C13F89-8309-465F-B2C0-C2BA3F1A459E">
     ccc
    </samp>
    is defined as a local variable for this function.
   </p>
   <pre class="pre codeblock prettyprint"><strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-38BA2026-A4A0-45D5-BCBB-B846D27D36E1">(defun ARGTEST ( arg1 arg2 / ccc )
  (setq ccc "Constant string")
  (strcat ccc ", " arg1 ", " arg2)
)</strong>
ARGTEST

<strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-6FA9B84E-8B83-42A6-ADF1-30F26AB62FE3">(ARGTEST "String 1" "String 2")</strong>
"Constant string, String 1, String 2"</pre>
   <p class="p" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__WSFACF1429558A55DE11F0759FF1E4B858C-6552">
    Once the function is done, the value of
    <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-4BCE3E10-3F65-4255-8E58-6689A12CB308">
     ccc
    </samp>
    is lost. You can test this by entering the following at the AutoCAD Command prompt:
   </p>
   <pre class="pre codeblock prettyprint"><strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-3F47D364-B00B-491D-9B7F-D0C550080A37">!ccc</strong>
nil</pre>
   <div class="note tip" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-8641E557-E6F2-4E4B-BE5E-65AC6977F036">
    <span class="tiptitle">
     Tip:
    </span>
    Do not make your variables local until after you have done most of the debugging for your function. By not declaring your variables as local right away, you can check the last values assigned to a variable after the function has finished.
   </div>
   <p class="p" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__WSFACF1429558A55DE11F0759FF1E4B858C-6551">
    Another advantage of using local variables is that AutoCAD can recycle the memory space used by these variables, whereas global variables keep accumulating within AutoCAD memory space.
   </p>
   <div class="section" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-85D44FE6-95FC-4AAE-99E2-511395056C4A">
    <p class="p" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__WSFACF1429558A55DE11F0759FF1E4B858C-6550">
     Global variables can be helpful if you want to retain values in between the uses of a function or command while the function remains loaded, or to use a value across many functions. However, if all or many of your variables are global it becomes increasingly possible that you could end up changing the value of a variable so it is incompatible with another function. This can lead to unpredictable behavior and it can be very difficult to identify the source of a problem. When declaring a global variable, it is good practice to indicate that you intend a variable to be global. A common way of doing this is to add an opening and closing asterisk to the variable name, for example,
     <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-26260E23-F4DB-4A4C-A859-B99D642C8CAC">
      *default-layer*
     </samp>
     .
    </p>
    <p class="p" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-55DB2904-62B1-42D2-BCE2-2EC6C6734D6F">
     All variables when they are initially declared are global. The following code demonstrates the use of both global and local variables.
    </p>
    <pre class="pre codeblock prettyprint">(<strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-50D52999-4651-4A8B-B7FA-D8C505BCA073">setq *dr-layer* "Doors")
(defun list-layers ( / cur-layer)
  (setq cur-layer (getvar "clayer"))
  (prompt (strcat "\nCurrent layer: " cur-layer "\nDoor layer: " *dr-layer*))
 (princ)
)</strong>
LIST-LAYERS

<strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-3B33D531-F9E4-4B17-A1F7-0835ECEF2419">(list-layers)</strong>
Current layer: 0
Door layer: Doors</pre>
    <p class="p" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-5C536A34-8E72-41CB-9FB5-FA750A77CB5E">
     You can test the values stored in the variables by doing the following:
    </p>
    <pre class="pre codeblock prettyprint"><strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-C8E7FDB7-BF2A-4EBA-B76F-9178E43A07F3">!cur-layer</strong>
nil

<strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-8E59C882-4784-49D4-A320-64446C06882A">!*dr-layer*</strong>
"Doors"</pre>
    <p class="p" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-0E251449-2F90-4B99-A684-F0E25677C97A">
     While a variable can be declared as local in a function, a variable with the same name can also be declared as global. If a variable name is added to the local variables list of a function, the global variable with the same name is ignored. The following example code demonstrates this behavior:
    </p>
    <pre class="pre codeblock prettyprint"><strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-30FC13AB-ACCE-4375-9FC7-472BF2EA535F">(setq var-scope "Global")
(defun list-scope ( / var-scope)
  (if (/= var-scope nil)
    (prompt (strcat "\nScope: " var-scope))
    (prompt (strcat "\nvar-scope is nil"))
  )

  (setq var-scope "Local")
  (prompt (strcat "\nScope: " var-scope))
 (princ)
)</strong>

<strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-A20C5D70-F754-404D-9544-0B17A4547EE4">(list-scope)</strong>
var-scope is nil
Scope: Local

<strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-C7A5F038-1A4A-401D-A053-4A6FE193F078">!var-scope</strong>
"Global"</pre>
    <p class="p" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-DEECF77D-D5EA-4336-AC47-55E03AC73573">
     When the function is started, the variable
     <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-ED3451DF-11B7-4C15-9DFE-568A926F3118">
      var-scope
     </samp>
     is declared with a value of nil within the scope of the function. This is why the message
     <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-DEA3499C-02DE-48E7-980D-58B1B9BA4091">
      var-scope
     </samp>
     is
     <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-C5A8448B-6BF8-447E-9CF0-CA3D675579AF">
      nil
     </samp>
     is returned when checking to see if the variable is
     <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-E6CA9CAB-F688-4D93-B5C3-4E5E1D6585E9">
      nil
     </samp>
     . If
     <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-7BE7CB47-A982-42ED-9ACE-9C5D281377D6">
      var-scope
     </samp>
     was not added to the local variables list for the function, the message Scope: Global would have been displayed and the value of
     <samp class="ph codeph" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-BD0CE902-E23E-4BDB-9BAD-08FD55AE6FDF">
      var-scope
     </samp>
     changed to "Local".
    </p>
    <pre class="pre codeblock prettyprint"><strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-359CE6D8-3D38-46B3-84A6-7CAAE9A7A519">(setq var-scope "Global")
(defun list-scope ( / )
  (if (/= var-scope nil)
    (prompt (strcat "\nScope: " var-scope))
    (prompt (strcat "\nvar-scope is nil"))
  )

  (setq var-scope "Local")
  (prompt (strcat "\nScope: " var-scope))
 (princ)
)</strong>

<strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-06B1CED8-4F37-49BF-BC31-0E14FC299156">(list-scope)</strong>
Scope: Global
Scope: Local

<strong class="ph b" id="GUID-A8045F62-1CE3-4022-ACC1-CC0E2C1E158D__GUID-3F34D3A7-47B9-4CBB-A636-D44F8CCE6796">!var-scope</strong>
"Local"</pre>
   </div>
  </div>
  <div class="related-links">
   <div class="relinfo relchildren">
    <strong>
     Topics in this section
    </strong>
    <ul class="ullinks">
     <li class="link ulchildlink">
      <a href="To_declare_local_variables_AutoLISP.html">
       To declare local variables (AutoLISP)
      </a>
      <br/>
      Local variables are only accessible within the user-defined function that they are defined in.
     </li>
    </ul>
   </div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>
      Parent topic:
     </strong>
     <a class="link" href="../About_Local_Variables_in_Functions_AutoLISP.html">
      About Local Variables in Functions (AutoLISP)
     </a>
    </div>
   </div>
   <div class="relinfo relconcepts">
    <h4 class="related">
     Related Concepts
    </h4>
    <ul>
     <li>
      <a class="link" href="../../../About_Variables_AutoLISP/About_Variables_AutoLISP.html" title="Variables are used to store a value or list of values in memory.">
       About Variables (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../../../About_Variables_AutoLISP/About_Predefined_Variables_AutoLISP.html" title="AutoLISP has several predefined variables that can be used with your custom functions and commands.">
       About Predefined Variables (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../../../About_Variables_AutoLISP/About_Nil_Variables_AutoLISP.html" title="A variable that has not been assigned a value has a default value of nil.">
       About Nil Variables (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../../About_Defining_a_Function_AutoLISP/About_Defining_a_Function_AutoLISP.html" title="You can define your own functions.">
       About Defining a Function (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=OARX&amp;l=ENU&amp;accessmode=live&amp;guid=GUID-796EFF94-E904-4F5B-B120-C6D2DCD8646A">
       Symbol-Handling Functions Reference (AutoLISP)
      </a>
     </li>
    </ul>
   </div>
  </div>
 </body>
</html>
