<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="concept" name="topic-type"/>
  <meta content="/view/OARX/2025/ENU/" name="helpsystempath"/>
  <meta content="OARX" name="product"/>
  <meta content="2025" name="release"/>
  <meta content="Developer" name="book"/>
  <meta content="AutoCAD-AutoLISP-Tutorials" name="component"/>
  <meta content="25/4/2024" name="created"/>
  <meta content="ACD=2025" name="applies-to"/>
  <meta content="ACAD_E=2025" name="applies-to"/>
  <meta content="AMECH_PP=2025" name="applies-to"/>
  <meta content="ARCHDESK=2025" name="applies-to"/>
  <meta content="BLDSYS=2025" name="applies-to"/>
  <meta content="CIV3D=2025" name="applies-to"/>
  <meta content="MAP=2025" name="applies-to"/>
  <meta content="PLNT3D=2025" name="applies-to"/>
  <meta content="PNID=2025" name="applies-to"/>
  <meta content="STRDET=2025" name="applies-to"/>
  <meta content="UTLDESN=2025" name="applies-to"/>
  <meta content="CSY, DEU, ESP, FRA, HUN, ITA, KOR, PLK, PTB, RUS, CHS, CHT" name="applies-to-languages"/>
  <meta content="TRIDION" name="generatedby"/>
  <meta content="disable" name="user-comments"/>
  <meta content="GUID-209318DE-95C4-40F6-8776-935C8905FDEE" name="workflow-parent-id"/>
  <meta content="general" name="experiencelevel"/>
  <meta content="programmer" name="audience"/>
  <meta content="02/12/2019" name="modified"/>
  <meta content="autolisp" name="topic-subtype"/>
  <meta content="GUID-CF559004-EC0C-4600-A344-C53D85741590" name="topicid"/>
  <meta content="ENU" name="language"/>
  <title>
   Designing the Gp:command-ended Callback Function
  </title>
  <link href="../../../../_assets/client-28da4093.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="GUID-CF559004-EC0C-4600-A344-C53D85741590">
  <div class="head">
   <div class="head-block">
    <div class="button-info">
     <span id="infoline">
     </span>
    </div>
    <div class="ancestry">
    </div>
    <div class="head-text">
     <h1>
      Designing the Gp:command-ended Callback Function
     </h1>
    </div>
   </div>
  </div>
  <div class="body conbody">
   <div class="section" id="GUID-CF559004-EC0C-4600-A344-C53D85741590__GUID-D53E7F2B-C8D5-458D-BF2F-FC8C8EFDB4CF">
    <p class="p" id="GUID-CF559004-EC0C-4600-A344-C53D85741590__WSFACF1429558A55DE1929BBDFEF458CE1C-7884">
     The
     <samp class="ph codeph" id="GUID-CF559004-EC0C-4600-A344-C53D85741590__GUID-13E171FB-5AD2-43C6-A3B0-60109BFED7A6">
      gp:command-ended
     </samp>
     editor reactor callback function is where most action takes place. Until this function is called, the garden path border polylines are “
     <em class="ph i" id="GUID-CF559004-EC0C-4600-A344-C53D85741590__GUID-CD21ADA4-3907-4BF6-B4BA-13F936FD1EBD">
      open for modify
     </em>
     ;” that is, users may still be manipulating the borders in AutoCAD. Within the reactor sequence, you have to wait until AutoCAD has done its part of the work before you are free to do what you want to do.
    </p>
    <p class="p" id="GUID-CF559004-EC0C-4600-A344-C53D85741590__WSFACF1429558A55DE1929BBDFEF458CE1C-7883">
     The following pseudo-code illustrates the logic of the
     <samp class="ph codeph" id="GUID-CF559004-EC0C-4600-A344-C53D85741590__GUID-40BE6214-D990-444E-A59A-4E3CF0200D10">
      gp:command-ended
     </samp>
     function:
    </p>
    <pre class="pre codeblock prettyprint">Determine the condition of the polyline.
  CONDITION 1 - POLYLINE ERASED (Erase command)
    Erase the tiles.
  CONDITION 2 - LOST ASSOCIATIVITY (Move, Rotate, etc.)
    Erase the tiles.
  CONDITION 3 - GRIP_STRETCH - REDRAW AND RE-TILE
    Erase the tiles.
    Get the current boundary data from the polyline.
    If it is a lightweight polyline,
       Process boundary data as 2D
    Else
       Process boundary data as 3D
    End if
  Redefine the polyline border (pass in parameters of the current
         boundary configuration, as well as the old).
  Get the new boundary information and put it into the format
         required for setting back into the polyline entity.
  Regenerate the polyline.
  Redraw the tiles (force ActiveX drawing).
  Put the revised boundary information back into the reactor
         named in *reactorsToChange*.
End function</pre>
    <p class="p" id="GUID-CF559004-EC0C-4600-A344-C53D85741590__WSFACF1429558A55DE1929BBDFEF458CE1C-7882">
     The pseudo-code is relatively straightforward, but there are several important details buried in the pseudo-code, and they are things you would not be expected to know at this point.
    </p>
   </div>
  </div>
  <div class="related-links">
   <div class="familylinks">
    <div class="parentlink">
     <strong>
      Parent topic:
     </strong>
     <a class="link" href="Lesson_7_Putting_It_All_Together_Visual_LISP_IDE.html">
      Lesson 7: Putting It All Together (Visual LISP IDE)
     </a>
    </div>
    <div class="previouslink">
     <strong>
      Previous topic:
     </strong>
     <a class="link" href="Adding_Activity_to_the_Object_Reactor_Callback_Functions_AutoLISP.html">
      Adding Activity to the Object Reactor Callback Functions (AutoLISP)
     </a>
    </div>
    <div class="nextlink">
     <strong>
      Next topic:
     </strong>
     <a class="link" href="Handling_Multiple_Entity_Types.html">
      Handling Multiple Entity Types
     </a>
    </div>
   </div>
  </div>
 </body>
</html>
