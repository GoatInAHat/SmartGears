<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="concept" name="topic-type"/>
  <meta content="/view/OARX/2025/ENU/" name="helpsystempath"/>
  <meta content="OARX" name="product"/>
  <meta content="2025" name="release"/>
  <meta content="Developer" name="book"/>
  <meta content="AutoCAD-AutoLISP-Tutorials" name="component"/>
  <meta content="25/4/2024" name="created"/>
  <meta content="ACD=2025" name="applies-to"/>
  <meta content="ACAD_E=2025" name="applies-to"/>
  <meta content="AMECH_PP=2025" name="applies-to"/>
  <meta content="ARCHDESK=2025" name="applies-to"/>
  <meta content="BLDSYS=2025" name="applies-to"/>
  <meta content="CIV3D=2025" name="applies-to"/>
  <meta content="MAP=2025" name="applies-to"/>
  <meta content="PLNT3D=2025" name="applies-to"/>
  <meta content="PNID=2025" name="applies-to"/>
  <meta content="STRDET=2025" name="applies-to"/>
  <meta content="UTLDESN=2025" name="applies-to"/>
  <meta content="CSY, DEU, ESP, FRA, HUN, ITA, KOR, PLK, PTB, RUS, CHS, CHT" name="applies-to-languages"/>
  <meta content="TRIDION" name="generatedby"/>
  <meta content="disable" name="user-comments"/>
  <meta content="GUID-209318DE-95C4-40F6-8776-935C8905FDEE" name="workflow-parent-id"/>
  <meta content="general" name="experiencelevel"/>
  <meta content="programmer" name="audience"/>
  <meta content="02/12/2019" name="modified"/>
  <meta content="autolisp" name="topic-subtype"/>
  <meta content="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04" name="topicid"/>
  <meta content="ENU" name="language"/>
  <title>
   Adding Activity to the Object Reactor Callback Functions (AutoLISP)
  </title>
  <link href="../../../../_assets/client-28da4093.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04">
  <div class="head">
   <div class="head-block">
    <div class="button-info">
     <span id="infoline">
     </span>
    </div>
    <div class="ancestry">
    </div>
    <div class="head-text">
     <h1>
      Adding Activity to the Object Reactor Callback Functions (AutoLISP)
     </h1>
    </div>
   </div>
  </div>
  <div class="body conbody">
   <div class="section" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-4B15E57F-F3E2-4B7F-984B-21E0302D69D1">
    <p class="p" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__WSFACF1429558A55DE1929BBDFEF458CE1C-7888">
     In Lesson 6, you registered two callback functions with object reactor events. The
     <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-156078D6-69E3-45AE-81E7-F436E01A3AB9">
      gp:outline-erased
     </samp>
     function was associated with the
     <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-F92DA26C-55C7-4979-ACD5-A13E83AE2220">
      :vlr-erased
     </samp>
     reactor event, and
     <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-4781A651-7972-48E7-96D5-171AE73D40D4">
      gp:outline-changed
     </samp>
     was associated with the
     <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-E0123C0A-4F94-4600-A381-A642F998D38A">
      :vlr-modified
     </samp>
     event. You need to make these functions do what they are intended to do.
    </p>
   </div>
   <div class="section" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__WSFACF1429558A55DE6C92BAFEE30F7510-7DBA">
    <h2 class="title sectiontitle">
     To make the object reactor callback functions do what they are intended to do
    </h2>
    <ol class="ol" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__WS1A9193826455F5FF18CB41610EC0A2E719-72E9">
     <li class="li" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__WS1A9193826455F5FF-7F10494411F03A24F24-1D1E">
      In
      <em class="ph i" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-BD6D8391-1452-4C82-B6F1-76F29A3825A4">
       gpreact.lsp
      </em>
      , change
      <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-CF39B6CA-5AFD-48A4-9BD6-9CD23E81A2E9">
       gp:outline-erased
      </samp>
      so it appears as follows:
      <pre class="pre codeblock prettyprint">(defun gp:outline-erased (outlinePoly reactor parameterList)
  (setq *reactorsToRemove*
       (cons reactor *reactorsToRemove*))
  (princ)
) ;_ end of defun</pre>
      <p class="p" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__WSFACF1429558A55DE1929BBDFEF458CE1C-7887">
       There is just one operation performed here. The reactor attached to the polyline is saved to a list of all reactors that need to be removed. (Remember: though reactors are attached to entities, they are separate objects entirely, and their relationships to entities need to be managed just as carefully as regular AutoCAD entities.)
      </p>
     </li>
     <li class="li" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__WS1A9193826455F5FF-7F10494411F03A24F24-1D1D">
      Change
      <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-83B45406-BBBF-40C0-AC7B-D6DFE4EAA764">
       gp:outline-changed
      </samp>
      to reflect the following code:
      <pre class="pre codeblock prettyprint">(defun gp:outline-changed (outlinePoly reactor parameterList)
  (if *lostAssociativity*
    (setq *reactorsToRemove*
                             (cons reactor *reactorsToRemove*))
    (setq *polytochange*     outlinePoly
          *reactorsToChange* (cons reactor *reactorsToChange*))
    )
  (princ)
)</pre>
      <p class="p" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__WSFACF1429558A55DE1929BBDFEF458CE1C-7886">
       There are two categories of functions that can modify the polyline outline. The first category contains those commands that will break the path's associativity with its tiles. You checked for this condition in
       <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-B950A0C1-4135-46DD-B1A9-C0E8F1A6464D">
        gp:command-will-start
       </samp>
       and set the
       <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-14A79AD8-6E1C-4AC5-B7A2-54413E566DEC">
        *lostAssociativity*
       </samp>
       global variable accordingly. In this case, the tiles need to be erased, and the path is then in the user's hands. The other category is the grip mode of the STRETCH command, where associativity is retained and you need to straighten out the outline after the user has finished dragging a vertex to a new location.
      </p>
      <p class="p" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__WSFACF1429558A55DE1929BBDFEF458CE1C-7885">
       The
       <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-748F60C7-242F-40F1-915F-C49DB2AEDF1D">
        *polyToChange*
       </samp>
       variable stores a VLA-Object pointer to the polyline itself. This will be used in the
       <samp class="ph codeph" id="GUID-86A64396-216A-4F40-9E7A-07811BE4FB04__GUID-8DA7ABCA-6BC1-4BA3-9636-D42FF60CA743">
        gp:command-ended
       </samp>
       function when it comes time to recalculate the polyline border.
      </p>
     </li>
    </ol>
   </div>
  </div>
  <div class="related-links">
   <div class="familylinks">
    <div class="parentlink">
     <strong>
      Parent topic:
     </strong>
     <a class="link" href="Lesson_7_Putting_It_All_Together_Visual_LISP_IDE.html">
      Lesson 7: Putting It All Together (Visual LISP IDE)
     </a>
    </div>
    <div class="previouslink">
     <strong>
      Previous topic:
     </strong>
     <a class="link" href="Adding_the_New_Reactor_Functionality.html">
      Adding the New Reactor Functionality
     </a>
    </div>
    <div class="nextlink">
     <strong>
      Next topic:
     </strong>
     <a class="link" href="Designing_the_Gp_command_ended_Callback_Function.html">
      Designing the Gp:command-ended Callback Function
     </a>
    </div>
   </div>
  </div>
 </body>
</html>
