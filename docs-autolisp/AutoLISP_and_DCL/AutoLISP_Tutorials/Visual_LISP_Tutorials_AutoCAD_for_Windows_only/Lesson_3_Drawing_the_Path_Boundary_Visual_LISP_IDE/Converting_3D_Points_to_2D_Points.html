<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="concept" name="topic-type"/>
  <meta content="/view/OARX/2025/ENU/" name="helpsystempath"/>
  <meta content="OARX" name="product"/>
  <meta content="2025" name="release"/>
  <meta content="Developer" name="book"/>
  <meta content="AutoCAD-AutoLISP-Tutorials" name="component"/>
  <meta content="25/4/2024" name="created"/>
  <meta content="ACD=2025" name="applies-to"/>
  <meta content="ACAD_E=2025" name="applies-to"/>
  <meta content="AMECH_PP=2025" name="applies-to"/>
  <meta content="ARCHDESK=2025" name="applies-to"/>
  <meta content="BLDSYS=2025" name="applies-to"/>
  <meta content="CIV3D=2025" name="applies-to"/>
  <meta content="MAP=2025" name="applies-to"/>
  <meta content="PLNT3D=2025" name="applies-to"/>
  <meta content="PNID=2025" name="applies-to"/>
  <meta content="STRDET=2025" name="applies-to"/>
  <meta content="UTLDESN=2025" name="applies-to"/>
  <meta content="CSY, DEU, ESP, FRA, HUN, ITA, KOR, PLK, PTB, RUS, CHS, CHT" name="applies-to-languages"/>
  <meta content="TRIDION" name="generatedby"/>
  <meta content="disable" name="user-comments"/>
  <meta content="GUID-D0CF600F-566E-4D79-9DEB-3039A97E5348" name="workflow-parent-id"/>
  <meta content="general" name="experiencelevel"/>
  <meta content="programmer" name="audience"/>
  <meta content="02/12/2019" name="modified"/>
  <meta content="autolisp" name="topic-subtype"/>
  <meta content="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D" name="topicid"/>
  <meta content="ENU" name="language"/>
  <title>
   Converting 3D Points to 2D Points
  </title>
  <link href="../../../../_assets/client-28da4093.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D">
  <div class="head">
   <div class="head-block">
    <div class="button-info">
     <span id="infoline">
     </span>
    </div>
    <div class="ancestry">
    </div>
    <div class="head-text">
     <h1>
      Converting 3D Points to 2D Points
     </h1>
    </div>
   </div>
  </div>
  <div class="body conbody">
   <div class="section" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__GUID-66F5F142-28FE-45BB-8295-B5C69E52AFA0">
    <p class="p" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WSFACF1429558A55DE1929BBDFEF458CE1C-77C3">
     Another useful function in the garden path program converts 3D points to 2D points. AutoCAD usually works with 3D coordinates, but some entities, such as lightweight polylines, are always meant to be 2D. The points returned by the
     <samp class="ph codeph" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__GUID-C693D924-D5D5-4E04-A43F-D74AF1C0E825">
      getpoint
     </samp>
     function are 3D, so you need to create a function to convert them.
    </p>
   </div>
   <div class="section" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WSFACF1429558A55DE6C92BAFEE30F7510-7E3D">
    <h2 class="title sectiontitle">
     To convert a 3D point to a 2D point
    </h2>
    <ol class="ol" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WS1A9193826455F5FF18CB41610EC0A2E719-7378">
     <li class="li" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WS1A9193826455F5FF-7F10494411F03A24F24-1E4E">
      Enter the following at the Console window prompt:
      <pre class="pre codeblock prettyprint">(defun 3dPoint-&gt;2dPoint (3dpt)(list (car 3dpt) (cadr 3dpt)))</pre>
     </li>
     <li class="li" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WS1A9193826455F5FF-7F10494411F03A24F24-1E4D">
      Test the function by entering the following at the Console prompt:
      <pre class="pre codeblock prettyprint">(3dpoint-&gt;2dpoint (list 10 20 0))</pre>
      <p class="p" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WSFACF1429558A55DE1929BBDFEF458CE1C-77C2">
       This works, but there is another consideration for the garden path application. Although it often doesn't matter whether a number is an integer or a real in LISP functions, this isn't the case with ActiveX functions, which you'll use later in this lesson. ActiveX functions require real numbers. You can easily modify the function to ensure it returns reals instead of integers.
      </p>
     </li>
     <li class="li" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WS1A9193826455F5FF-7F10494411F03A24F24-1E4C">
      Enter the following code at the Console prompt:
      <pre class="pre codeblock prettyprint">(defun 3dPoint-&gt;2dPoint (3dpt)(list (float(car 3dpt)) 
(float(cadr 3dpt))))</pre>
     </li>
     <li class="li" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WS1A9193826455F5FF-7F10494411F03A24F24-1E4B">
      Run the function again:
      <pre class="pre codeblock prettyprint">(3dpoint-&gt;2dpoint (list 10 20 0))</pre>
      <p class="p" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WSFACF1429558A55DE1929BBDFEF458CE1C-77C1">
       Notice the return values are now reals (indicated by the decimal values).
      </p>
     </li>
     <li class="li" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WS1A9193826455F5FF-7F10494411F03A24F24-1E4A">
      Test the function again, this time using the
      <samp class="ph codeph" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__GUID-42100930-1B88-4713-92FD-A1B0C14DD9E8">
       getpoint
      </samp>
      function. Enter the following at the Console prompt:
      <pre class="pre codeblock prettyprint">(setq myPoint(getpoint))</pre>
     </li>
     <li class="li" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WS1A9193826455F5FF-7F10494411F03A24F24-1E49">
      Pick a point in the AutoCAD drawing area.
      <p class="p" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WSFACF1429558A55DE1929BBDFEF458CE1C-77C0">
       The
       <samp class="ph codeph" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__GUID-74278639-D8BD-4F5C-B0E5-307FB5F9258A">
        getpoint
       </samp>
       function returns a 3D point.
      </p>
     </li>
     <li class="li" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WS1A9193826455F5FF-7F10494411F03A24F24-1E48">
      Enter the following at the Console prompt:
      <pre class="pre codeblock prettyprint">(3dPoint-&gt;2Dpoint myPoint)</pre>
      <p class="p" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WSFACF1429558A55DE1929BBDFEF458CE1C-77BF">
       Note the 2D point returned.
      </p>
      <p class="p" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WSFACF1429558A55DE1929BBDFEF458CE1C-77BE">
       Now add the function to the
       <em class="ph i" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__GUID-D7067FA7-F312-49EB-858C-A91E54D38B3B">
        gpmain.lsp
       </em>
       file, just as you did with
       <samp class="ph codeph" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__GUID-90FDD7C3-A5E8-4A19-BB14-759EFE9CF15C">
        Degrees-&gt;Radians
       </samp>
       . The new code should look like the following:
      </p>
      <pre class="pre codeblock prettyprint">;;;--------------------------------------------------------------;
;;; Function: 3dPoint-&gt;2dPoint                                   ;
;;;--------------------------------------------------------------;
;;; Description: This function takes one parameter representing a;
;;;              3D point (list of three integers or reals), and ;
;;;              converts it into a 2D point (list of two reals).;
;;;              There is no error checking on the 3D point      ;
;;;              parameter -- it is assumed to be a valid point. ;
;;;--------------------------------------------------------------;
;;; To do: Add some kind of parameter checking so that this      ;
;;;        function won't crash a program if it is passed a      ;
;;;        null value, or some other kind of data type than a    ;
;;;        3D point.                                             ;
;;;--------------------------------------------------------------;
(defun 3dPoint-&gt;2dPoint (3dpt)
  (list (float(car 3dpt)) (float(cadr 3dpt)))
)</pre>
      <p class="p" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WSFACF1429558A55DE1929BBDFEF458CE1C-77BD">
       Note that the function heading includes a comment about some work you should do on this function in the future. If you want to earn some extra credit, think about how you would go about foolproofing this function so that invalid data does not make it crash.
      </p>
      <p class="p" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__WSFACF1429558A55DE1929BBDFEF458CE1C-77BC">
       <strong class="ph b" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__GUID-9D048E8F-FEB4-481C-BD65-025737DCE031">
        Hint:
       </strong>
       <samp class="ph codeph" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__GUID-846B212B-6140-4081-8488-F60807327B89">
        numberp
       </samp>
       and
       <samp class="ph codeph" id="GUID-D4E362BD-94E5-498B-B5F0-213B5FA8E89D__GUID-35C6AA10-D906-4125-A41D-4FA1A5E0E93E">
        listp
       </samp>
       functionsâ€¦
      </p>
      <pre class="pre codeblock prettyprint">(listp '(1 1 0)) =&gt; T
(numberp 3.4) =&gt; T</pre>
     </li>
    </ol>
   </div>
  </div>
  <div class="related-links">
   <div class="familylinks">
    <div class="parentlink">
     <strong>
      Parent topic:
     </strong>
     <a class="link" href="Lesson_3_Drawing_the_Path_Boundary_Visual_LISP_IDE.html">
      Lesson 3: Drawing the Path Boundary (Visual LISP IDE)
     </a>
    </div>
    <div class="previouslink">
     <strong>
      Previous topic:
     </strong>
     <a class="link" href="Converting_Degrees_to_Radians.html">
      Converting Degrees to Radians
     </a>
    </div>
    <div class="nextlink">
     <strong>
      Next topic:
     </strong>
     <a class="link" href="Drawing_AutoCAD_Entities.html">
      Drawing AutoCAD Entities
     </a>
    </div>
   </div>
  </div>
 </body>
</html>
