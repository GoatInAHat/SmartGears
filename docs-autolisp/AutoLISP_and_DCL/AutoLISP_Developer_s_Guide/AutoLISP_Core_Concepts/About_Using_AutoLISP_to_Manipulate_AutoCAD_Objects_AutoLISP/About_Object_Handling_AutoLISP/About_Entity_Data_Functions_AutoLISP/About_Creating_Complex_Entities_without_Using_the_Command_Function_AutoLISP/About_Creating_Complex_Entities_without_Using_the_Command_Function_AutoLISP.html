<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xml:lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="concept" name="topic-type"/>
  <meta content="/view/OARX/2025/ENU/" name="helpsystempath"/>
  <meta content="OARX" name="product"/>
  <meta content="2025" name="release"/>
  <meta content="Developer" name="book"/>
  <meta content="AutoCAD-AutoLISP" name="component"/>
  <meta content="21/10/2024" name="created"/>
  <meta content="ACD=2025" name="applies-to"/>
  <meta content="ACAD_E=2025" name="applies-to"/>
  <meta content="AMECH_PP=2025" name="applies-to"/>
  <meta content="ARCHDESK=2025" name="applies-to"/>
  <meta content="BLDSYS=2025" name="applies-to"/>
  <meta content="CIV3D=2025" name="applies-to"/>
  <meta content="MAP=2025" name="applies-to"/>
  <meta content="PLNT3D=2025" name="applies-to"/>
  <meta content="PNID=2025" name="applies-to"/>
  <meta content="STRDET=2025" name="applies-to"/>
  <meta content="UTLDESN=2025" name="applies-to"/>
  <meta content="TRIDION" name="generatedby"/>
  <meta content="disable" name="user-comments"/>
  <meta content='Complex entities (a block, polyface mesh, or "legacy" polyline) can be created by making multiple calls to entmake, using a separate call for each subentity.' name="description"/>
  <meta content="general" name="experiencelevel"/>
  <meta content="programmer" name="audience"/>
  <meta content="12/08/2024" name="modified"/>
  <meta content="autolisp" name="topic-subtype"/>
  <meta content="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688" name="topicid"/>
  <meta content="ENU" name="language"/>
  <title>
   About Creating Complex Entities without Using the Command Function (AutoLISP)
  </title>
  <link href="../../../../../../../_assets/client-28da4093.css" rel="stylesheet" type="text/css"/>
 </head>
 <body id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688">
  <div class="head">
   <div class="head-block">
    <div class="button-info">
     <span id="infoline">
     </span>
    </div>
    <div class="ancestry">
    </div>
    <div class="head-text">
     <h1>
      About Creating Complex Entities without Using the Command Function (AutoLISP)
     </h1>
    </div>
   </div>
  </div>
  <div class="body conbody">
   <p class="shortdesc">
    Complex entities (a block, polyface mesh, or "legacy" polyline) can be created by making multiple calls to
    <samp class="ph codeph" id="GUID-071A5F3E-8C15-4DDD-8C2B-7A2F9BEB07D7">
     entmake
    </samp>
    , using a separate call for each subentity.
   </p>
   <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-3D333D98-ED33-4427-919A-E5ECF40B6B0E">
    When
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-0E7A33FD-7313-4831-B441-ED5F88EB3831">
     entmake
    </samp>
    first receives an initial component for a complex entity, it creates a temporary file in which to gather the definition data and extended data, if present. For each subsequent
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-BA8B5568-8B71-467C-A786-63854210CD2C">
     entmake
    </samp>
    call, the function checks if the temporary file exists. If it does, the new subentity is appended to the file. When the definition of the complex entity is complete (that is, when
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-0242E947-7510-4990-BB45-C2D655267671">
     entmake
    </samp>
    receives an appropriate Seqend or Endblk subentity), the entity is checked for consistency; if valid, it is added to the drawing. The file is deleted when the complex entity is complete or when its creation has been canceled. You can cancel the creation of a complex entity by entering
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-8E53B503-BA04-404C-BF09-A0A87039684B">
     entmake
    </samp>
    with no arguments. This clears the temporary file and returns
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-932BD192-32E3-4EDA-97C4-ACF69EE40D78">
     nil
    </samp>
    .
   </p>
   <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-D5C310E0-A2EA-4E75-9BF0-A012CCB4A399">
    No portion of a complex entity is displayed in a drawing until its definition is complete; that is not until the final Seqend or Endblk subentity has been passed to
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-2DC7668E-C807-422A-B3BA-DC0E3B01EC24">
     entmake
    </samp>
    . The
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-27B860AF-8E9E-4BB7-AE99-0AE9AB347B19">
     entlast
    </samp>
    function cannot retrieve the most recently created subentity for a complex entity that has not been completed.
   </p>
   <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-5948BA58-F087-45FD-97D3-2E918EBE6B95">
    As the previous paragraphs imply,
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-BACCC6B6-23A2-4281-A219-FB68FD502A84">
     entmake
    </samp>
    can construct only one complex entity at a time. If a complex entity is being created and
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-B1BC23F6-C6E3-4223-B007-7B82348E82C6">
     entmake
    </samp>
    receives invalid data or an entity that is not an appropriate
    <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-21474542-3387-41E2-B295-9C1D4394369A">
     subentity
    </samp>
    , both the invalid entity and the entire complex entity are rejected.
   </p>
   <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-8AF94837-089F-4CC6-B0B9-839AB7193523">
    Complex entities can exist in either model space or paper space, but not both. If you have changed the current space by invoking either of the AutoCAD MSPACE or PSPACE commands (with command) while a complex entity is being constructed, a subsequent call to entmake cancels the complex entity. This can also occur if the subentity has a 67 dxf group code whose value does not match the 67 dxf group code of the entity header.
   </p>
   <div class="section" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__SECTION_C9F6C4D2806E46409AF1C883435AAB49">
    <h2 class="title sectiontitle">
     Working with Polylines
    </h2>
    <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-E1D43E24-AA6D-46C4-8829-97218AC94B1A">
     The following example contains five calls to the
     <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-6E71B1EF-241D-4332-987E-D7DAEDB498D9">
      entmake
     </samp>
     function which creates a single complex entity, an old-style polyline. The polyline has three vertices located at coordinates (1,1,0), (4,6,0), and (3,2,0), and has a linetype of DASHED and a color of BLUE. All other optional definition data assume default values.
    </p>
    <pre class="pre codeblock prettyprint">
(entmake '((0 . "POLYLINE") ; Object type
  (62 . 5)                  ; Color
  (6 . "dashed")            ; Linetype
  (66 . 1)                  ; Vertices follow
 ))

(entmake '((0 . "VERTEX")   ; Object type
  (10 1.0 1.0 0.0)          ; Start point
))

(entmake '((0 . "VERTEX")   ; Object type
  (10 4.0 6.0 0.0)          ; Second point
))

(entmake '((0 . "VERTEX")   ; Object type
  (10 3.0 2.0 0.0)          ; Third point
))

(entmake '((0 . "SEQEND"))) ; Sequence end</pre>
    <div class="note note" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-F46E5FB9-F6D1-46AA-BC6B-CB7C5F0A9E8E">
     <span class="notetitle">
      Note:
     </span>
     For the previous example code to execute properly, the linetype DASHED must be loaded.
    </div>
    <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-D7711AD8-492D-4AE0-987C-90FAC5349A15">
     When defining dotted pairs, as in the above example, there must be a space on both sides of the dot. Otherwise, you will get an invalid dotted pair error message. If you want to use values stored in variables to create a dotted pair, you must use the list and
     <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-3E7D7E66-77BD-44CE-BEA2-26CC63A8558A">
      cons
     </samp>
     functions instead of using the
     <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-11456591-DD49-4CE9-AC26-DB90F71B94AD">
      quote
     </samp>
     (
     <strong class="ph b" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-CB14A507-B3E1-4B13-A443-09CE7CA4E566">
      <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-CE2F7E45-FA04-4F1E-8A23-8773B4A201A1">
       ‘
      </samp>
     </strong>
     ) function.
    </p>
    <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-730FA1CC-602F-4D04-A775-C6B4CA390216">
     For example, the following code sets the color and linetype for the polyline object from values to red and dashed using variables:
    </p>
    <pre class="pre codeblock prettyprint">(setq clr 5
         ltype "dashed")

(entmake (list (cons 0 "POLYLINE") ; Object type
  (cons 62 clr)                    ; Color
  (cons 6 ltype)                   ; Linetype
  (cons 66 1)                      ; Vertices follow
))</pre>
    <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-575388FD-FD7D-47A0-85CA-F2E64F6738A8">
     "Legacy" polyline entities always include a vertices-follow flag (also dxf group code 66). The value of this flag must be 1, and the flag must be followed by a sequence of vertex entities, terminated by a Seqend subentity.
    </p>
    <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-5B36AA86-748D-4302-AE6E-81D1BC9404E9">
     Applications can represent polygons with an arbitrarily large number of sides in polyface meshes. However, the AutoCAD entity structure imposes a limit on the number of vertices that a given face entity can specify. You can represent more complex polygons by dividing them into triangular wedges. AutoCAD represents triangular wedges as four-vertex faces where two adjacent vertices have the same value. Their edges should be made invisible to prevent visible artifacts of this subdivision from being drawn. The AutoCAD PFACE command performs this subdivision automatically, but when applications generate polyface meshes directly, the applications must do this themselves.
    </p>
    <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-984B0EBA-D2B4-4E16-98D8-404A50FFE5FC">
     The number of vertices per face is the key parameter in this subdivision process. The AutoCAD PFACEVMAX system variable provides an application with the number of vertices per face entity. This value is read-only and is set to 4.
    </p>
   </div>
   <div class="section" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__SECTION_1737CC22511A4AB09D8C7551CBA3D72F">
    <h2 class="title sectiontitle">
     Working with Blocks
    </h2>
    <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-F1ACCD65-A740-4FB3-94CB-1FBE9DD49A52">
     Block definitions begin with a block entity and end with an Endblk subentity. Newly created blocks are automatically entered into the symbol table where they can be referenced. Block definitions cannot be nested, nor can they reference themselves. A block definition can contain references to other block definitions.
    </p>
    <div class="note note" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-23D8EEA3-C93B-483E-B465-879BB739AF5F">
     <span class="notetitle">
      Note:
     </span>
     Before you use
     <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-F769386D-B02C-473B-A822-A73829703A47">
      entmake
     </samp>
     to create a block, you should use
     <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-607B444C-19AA-45E7-9BFD-ACFD91720DEC">
      tblsearch
     </samp>
     to ensure that the name of the new block is unique. The
     <samp class="ph codeph" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-D27B62ED-06B3-400F-9379-47D770C669C7">
      entmake
     </samp>
     function does not check for name conflicts in the block definitions table, so you could inadvertently redefine an existing block.
    </div>
    <p class="p" id="GUID-7DA0E2BA-963F-4E41-AF33-C6B9D89D4688__GUID-94132A64-B229-456A-932C-5F526ED6B2EE">
     Block references can include an attributes-follow flag (dxf group code 66). If present and equal to 1, a series of attribute (Attrib) entities is expected to follow the Insert object. The attribute sequence is terminated by a Seqend subentity.
    </p>
   </div>
  </div>
  <div class="related-links">
   <div class="relinfo relchildren">
    <strong>
     Topics in this section
    </strong>
    <ul class="ullinks">
     <li class="link ulchildlink">
      <a href="About_Working_With_Blocks_AutoLISP.html">
       About Working With Blocks (AutoLISP)
      </a>
      <br/>
     </li>
     <li class="link ulchildlink">
      <a href="About_Anonymous_Blocks_AutoLISP.html">
       About Anonymous Blocks (AutoLISP)
      </a>
      <br/>
      The block definitions (BLOCK) table in a drawing can contain anonymous blocks (also known as unnamed blocks), that AutoCAD creates to support dynamic blocks, tables, hatch patterns, and associative dimensions.
     </li>
    </ul>
   </div>
   <div class="familylinks">
    <div class="parentlink">
     <strong>
      Parent topic:
     </strong>
     <a class="link" href="../About_Entity_Data_Functions_AutoLISP.html">
      About Entity Data Functions (AutoLISP)
     </a>
    </div>
   </div>
   <div class="relinfo relconcepts">
    <h4 class="related">
     Related Concepts
    </h4>
    <ul>
     <li>
      <a class="link" href="../About_Modifying_an_Entity_without_the_Command_Function_AutoLISP.html" title="An entity can be modified directly by changing its entity list and posting the changes back to the database.">
       About Modifying an Entity without the Command Function (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../../About_Accessing_an_Object_s_Entity_Name_AutoLISP/About_Accessing_an_Object_s_Entity_Name_AutoLISP.html" title="An AutoLISP routine must obtain an object’s entity name to make subsequent calls to the entity data or selection set functions.">
       About Accessing an Object’s Entity Name (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../About_Obtaining_Entity_Information_AutoLISP.html" title="The entget function returns the definition data of a specified entity as a list.">
       About Obtaining Entity Information (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../About_Deleting_an_Entity_AutoLISP.html" title="Entities can be deleted using the entdel function or AutoCAD ERASE command (with command).">
       About Deleting an Entity (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="About_Anonymous_Blocks_AutoLISP.html" title="The block definitions (BLOCK) table in a drawing can contain anonymous blocks (also known as unnamed blocks), that AutoCAD creates to support dynamic blocks, tables, hatch patterns, and associative dimensions.">
       About Anonymous Blocks (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../../About_Non_Graphical_Object_Handling_AutoLISP.html" title="A drawing database contains two types of non-graphical objects: dictionary and symbol table objects.">
       About Non-Graphical Object Handling (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../../../../FAQs/FAQ_What_is_the_Difference_Between_Lightweight_Polylines_and_Legacy_Polylines_Au.html" title='A lightweight polyline (LWPOLYLINE) is defined in the drawing database as a single graphic entity unlike the "legacy" polyline (POLYLINE), which is defined as a group of subentities. A "legacy" polyline can be either a 2D or 3D polyline, while a lightweight polyline can only be a 2D polyline.'>
       FAQ: What is the Difference Between Lightweight Polylines and "Legacy" Polylines? (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="../../../../FAQs/FAQ_How_Do_I_Process_Curve_Fit_and_Spline_Fit_Polylines_AutoLISP.html" title="A &quot;legacy&quot; polyline might contain vertices that were not created explicitly; these auxiliary vertices were inserted automatically by the AutoCAD PEDIT command's Fit and Spline options.">
       FAQ: How Do I Process Curve-Fit and Spline-Fit Polylines? (AutoLISP)
      </a>
     </li>
     <li>
      <a class="link" href="https://beehive.autodesk.com/community/service/rest/cloudhelp/resource/cloudhelpchannel/guidcrossbook/?v=2025&amp;p=OARX&amp;l=ENU&amp;accessmode=live&amp;guid=GUID-1197B695-C73C-4B4D-AD5D-8F8EB64FB253">
       Object-Handling Functions Reference (AutoLISP)
      </a>
     </li>
    </ul>
   </div>
  </div>
 </body>
</html>
